<!-- Warning : Do not edit this document manually -->
<?xml version="1.0" encoding="ISO-8859-1" ?>
<Project>
    <ProjectInfo>
        <Type>0</Type>
        <ID>{61b6035f-0f6b-4839-93fe-c14f7f7a7345}</ID>
        <Environment>1</Environment>
    </ProjectInfo>
    <ProductInfo>
        <Created>
            <Name>AmsPluginMaker 1.1</Name>
            <Version>1.1.0.0</Version>
            <Date>1/11/2020 4:58:41 PM</Date>
            <Type>Commercial Version</Type>
            <ID>{7a2e86e3-5079-44d5-8208-2aa1334ccc56}</ID>
            <MajorVersion>1</MajorVersion>
            <MinorVersion>1</MinorVersion>
        </Created>
        <Modified>
            <Name>AmsPluginMaker 1.1</Name>
            <Version>1.1.0.0</Version>
            <Date>1/11/2020 4:58:44 PM</Date>
            <Type>Commercial Version</Type>
            <ID>{7a2e86e3-5079-44d5-8208-2aa1334ccc56}</ID>
            <MajorVersion>1</MajorVersion>
            <MinorVersion>1</MinorVersion>
        </Modified>
    </ProductInfo>
    <Scripts>
        <Script Name="Lua" ScrollPosition="0" CursorPosition="43084">
            <Source>LS1bW0Rlc2NyaXB0aW9uDQo8cD5UaGlzIHBsdWdpbiBhbGxvd3MgdGhlIHByb2dyYW1tZXIgdG8gbWFrZSBncm91cHMgb2Ygb2JqZWN0cyBhbmQgbWFuaXB1bGF0ZSB0aGVtIHF1aWNrbHkgYW5kIGVhc2lseS48L3A+DQo8cD5Db25jZXB0IGJ5IFdvcm0gYW5kIFJpemxhVUsuIFBsdWdpbiBhbmQgQ29kZSBieSBDZW50YXVyaSBTb2xkaWVyLjwvcD4NCl1dDQotLVtbRmVhdHVyZXMNCjx1bCBjbGFzcz0iY29tbWVudHNfbGlzdF9mZWF0dXJlcyI+DQoJPGxpPkVhc2lseSAgbWFuaXB1bGF0ZSB0aGUgY29tbW9uIHByb3BlcnRpZXMgb2Ygc2V2ZXJhbCBvYmplY3RzPC9saT4NCgk8bGk+RWFzaWx5IGVudW1lcmF0ZSBncm91cGVkIG9iamVjdHM8L2xpPg0KCTxsaT5NYW5hZ2UgZ3JvdXAgYXMgYSBzaW5nbGUgaXRlbTwvbGk+DQoJPGxpPkNyZWF0ZSBtdWx0aXBsZSBncm91cHM8L2xpPg0KCTxsaT5RdWlja2x5IGFuZCBFYXNpbHkgYWRkIGFuZCByZW1vdmUgZ3JvdXAgb2JqZWN0czwvbGk+CQ0KPC91bD4NCl1dDQotLVtbVmVyc2lvbiBIaXN0b3J5DQo8cD48Yj5WZXJzaW9uIDIuMC4wLjY8L2I+PC9wPg0KPHA+TG9jYWxpemVkIGFsbCB0YWJsZXMgaW5jcmVhc2luZyBwbHVnaW4gc3BlZWQ8L3A+DQo8YnIvPg0KPHA+PGI+VmVyc2lvbiAyLjAuMC41PC9iPjwvcD4NCjxwPkZpeGVkIGEgYnVnIGluIHRoZSBHcm91cHMuR2V0T2JqZWN0cygpIGZ1bmN0aW9uLjwvcD4NCjxici8+DQo8cD48Yj5WZXJzaW9uIDIuMC4wLjQ8L2I+PC9wPg0KPHA+Rml4ZWQgYSB0eXBvIHRoYXQgY2F1c2VkIGVycm9ycyBpbiBCdXR0b24gb2JqZWN0cy48L3A+DQo8YnIvPg0KPHA+PGI+VmVyc2lvbiAyLjAuMC4zPC9iPjwvcD4NCjxwPkFkZGVkIHRoZSBRdWlja1RpbWUgT2JqZWN0LjwvcD4NCjxwPkFkZGVkIHRoZSBQREYgT2JqZWN0LjwvcD4NCjxwPkZpeGVkIGEgYnVnIHRoYXQgb2NjdXJlZCB3aGVuIHRyeWluZyB0byBnZXQvc2V0IHRoZSB2aXNpYmlsdHkgb2YgaG90c3BvdHMuPC9wPg0KPGJyLz4NCjxwPjxiPlZlcnNpb24gMi4wLjAuMjwvYj48L3A+DQo8cD5GaXhlZCBhIHR5cG8gdGhhdCBjYXVzZWQgR3JvdXAuRW51bWVyYXRlKCkgdG8gZmFpbC48L3A+DQo8YnIvPg0KPHA+PGI+VmVyc2lvbiAyLjAuMC4xPC9iPjwvcD4NCjxwPkZpeGVkIGEgdHlwbyB0aGF0IGNhdXNlZCB4QnV0dG9uIGZ1bmN0aW9ucyB0byBmYWlsLjwvcD4NCjxwPkZpeGVkIGEgYnVnIGluIEdyb3VwLlNldFBvcygpIHRoYXQgbGVmdCBBcHBsaWNhdGlvbi5SZWRyYXcoKSBmYWxzZS48L3A+DQo8YnIvPg0KPHA+PGI+VmVyc2lvbiAyLjAuMC4wPC9iPjwvcD4NCjxwPlJld3JvdGUgdGhlIEdyb3VwIHBsdWdpbiBhbmQgZnJhbWV3b3JrIGZyb20gc2NyYXRjaC48L3A+DQo8cD5VcGRhdGVkIHRoZSBJUkx1YSBQbHVnaW4gSGVscGVyIEZ1bmN0aW9ucyB0byB2Mi43LjwvcD4NCjxici8+DQo8cD48aT5BZGRlZCB0aGUgZm9sbG93aW5nIGZ1bmN0aW9uczo8L2k+PC9wPg0KPHVsIGNsYXNzPSJjb21tZW50c19saXN0Ij4NCgk8bGk+R3JvdXAuQWRkT2JqZWN0KCk8L2xpPg0KCTxsaT5Hcm91cC5BZGp1c3RQb3MoKTwvbGk+DQoJPGxpPkdyb3VwLkFkanVzdFNpemUoKTwvbGk+DQoJPGxpPkdyb3VwLkNsZWFyU2V0dGluZ3MoKTwvbGk+DQoJPGxpPkdyb3VwLkNvdW50KCk8L2xpPg0KCTxsaT5Hcm91cC5DcmVhdGUoKTwvbGk+DQoJPGxpPkdyb3VwLkNyZWF0ZU9iamVjdCgpPC9saT4NCgk8bGk+R3JvdXAuRGVsZXRlKCk8L2xpPg0KCTxsaT5Hcm91cC5EZWxldGVJbmFjdGl2ZVNldHRpbmdzKCk8L2xpPg0KCTxsaT5Hcm91cC5EZWxldGVPYmplY3QoKTwvbGk+DQoJPGxpPkdyb3VwLkRvZXNFeGlzdCgpPC9saT4NCgk8bGk+R3JvdXAuRW51bWVyYXRlKCk8L2xpPg0KCTxsaT5Hcm91cC5HZXRFbmFibGVkKCk8L2xpPg0KCTxsaT5Hcm91cC5HZXRHcm91cE5hbWVzKCk8L2xpPg0KCTxsaT5Hcm91cC5HZXRPYmplY3RzKCk8L2xpPg0KCTxsaT5Hcm91cC5HZXRSZWN0UG9zKCk8L2xpPg0KCTxsaT5Hcm91cC5HZXRSZWN0U2l6ZSgpPC9saT4NCgk8bGk+R3JvdXAuR2V0VmlzaWJsZSgpPC9saT4NCgk8bGk+R3JvdXAuTG9hZFNldHRpbmdzKCk8L2xpPg0KCTxsaT5Hcm91cC5NZXJnZSgpPC9saT4NCgk8bGk+R3JvdXAuT2JqZWN0RG9lc0V4aXN0KCk8L2xpPg0KCTxsaT5Hcm91cC5PYmplY3RJc0luR3JvdXAoKTwvbGk+DQoJPGxpPkdyb3VwLlJlY2FsbFNldHRpbmdzKCk8L2xpPg0KCTxsaT5Hcm91cC5SZW1vdmUoKTwvbGk+DQoJPGxpPkdyb3VwLlJlbW92ZU9iamVjdCgpPC9saT4NCgk8bGk+R3JvdXAuUmVuYW1lKCk8L2xpPg0KCTxsaT5Hcm91cC5TYXZlU2V0dGluZ3MoKTwvbGk+DQoJPGxpPkdyb3VwLlNldEVuYWJsZWQoKTwvbGk+DQoJPGxpPkdyb3VwLlNldFBvcygpPC9saT4NCgk8bGk+R3JvdXAuU2V0UmVjdFBvcygpPC9saT4NCgk8bGk+R3JvdXAuU2V0U2l6ZSgpPC9saT4NCgk8bGk+R3JvdXAuU2V0VmlzaWJsZSgpPC9saT4NCgk8bGk+R3JvdXAuU3RvcmVTZXR0aW5ncygpPC9saT4NCgk8bGk+R3JvdXAuVG9nZ2xlRW5hYmxlZCgpPC9saT4NCgk8bGk+R3JvdXAuVG9nZ2xlVmlzaWJsZSgpPC9saT4NCjwvdWw+DQo8YnIvPg0KPHA+PGI+VmVyc2lvbiAxLjQuMS4xPC9iPjwvcD4NCjxwPkZpeGVkIGEgYnVnIGluIHRoZSBHcm91cC5TZXRIZWlnaHQoKSBmdW5jdGlvbi48L3A+DQo8cD5GaXhlZCBhIGJ1ZyBpbiB0aGUgcGFnZS9kaWFsb2dleCBhdXRvLWRldGVjdGlvbiBzeXN0ZW0uPC9wPg0KPGJyLz4NCjxwPjxiPlZlcnNpb24gMS40LjEuMDwvYj48L3A+DQo8cD5GaXhlZCBhIGJ1ZyB0aGF0IHJlc3VsdGVkIGZyb20gb2JqZWN0cyBiZWluZyBhZGRlZCB0byBncm91cHMgd2l0aG91dCwgZmlyc3QsIGNoZWNraW5nIGZvciB0aGVpciBleGlzdGVuY2UuPC9wPg0KPHA+Q29uZmlndXJlZCBwbHVnaW4gdG8gYXV0by1kZXRlY3QgcGFnZXMgYW5kIGRpYWxvZ3Mgd2hlbiBtYW5pcHVsYXRpbmcgb2JqZWN0cy48L3A+DQo8YnIvPg0KPHA+PGI+VmVyc2lvbiAxLjQuMC4wPC9iPjwvcD4NCjxwPlVwZGF0ZWQgdG8gYmUgY29tcGF0aWJsZSB3aXRoIEFNUyA4LjAuPC9wPg0KPHA+VXBkYXRlZCB0aGUgSVJMdWEgUGx1Z2luIEhlbHBlciBGdW5jdGlvbnMgdG8gdjIuNi48L3A+DQo8cD5BZGRlZCBXb3JtIHRvIHRoZSBjcmVkaXRzIGFuZCBjb3B5cmlnaHQuPC9wPg0KPGJyLz4NCjxwPjxiPlZlcnNpb24gMS4zLjAuMDwvYj48L3A+DQo8cD5SZW9yZ2FuaXplZCBYTUwgcmVhZG91dC48L3A+DQo8YnIvPg0KPHA+PGk+QWRkZWQgdGhlIGZvbGxvd2luZyBmdW5jdGlvbnM6PC9pPjwvcD4NCjx1bCBjbGFzcz0iY29tbWVudHNfbGlzdCI+DQoJPGxpPkdyb3VwLkFkanVzdEhlaWdodCgpPC9saT4NCgk8bGk+R3JvdXAuQWRqdXN0V2lkdGgoKTwvbGk+DQoJPGxpPkdyb3VwLlNldEhlaWdodCgpPC9saT4NCgk8bGk+R3JvdXAuU2V0UG9zKCk8L2xpPg0KCTxsaT5Hcm91cC5TZXRXaWR0aCgpPC9saT4NCjwvdWw+DQo8YnIvPg0KPHA+PGI+VmVyc2lvbiAxLjIuMC4wPC9iPjwvcD4NCjxwPkZpeGVkIGFuIGVycm9yIGluIHRoZSBHcm91cC5DcmVhdGVPYmplY3QoKSBmdW5jdGlvbiB0aGF0IGNhdXNlZCB0aGUgZnVuY3Rpb24gdG8gbm90IHdvcmsuPC9wPg0KPHA+QWRkZWQgdGhlIEdyb3VwLkVudW0oKSBmdW5jdGlvbiB0aGF0IHJldHVybnMgYWxsIG9iamVjdHMgYW5kIHRoZWlyIHR5cGVzIGZyb20gYSBzcGVjaWZpYyBncm91cC48L3A+DQo8YnIvPg0KPHA+PGI+VmVyc2lvbiAxLjEuMC4wPC9iPjwvcD4NCjxwPlVwZGF0ZWQgY29kZSB0byBjb21wbHkgd2l0aCBSaXpsYVVrJ3MgbmV3IHZlcnNpb24gYW5kIGZvcm1hdC48L3A+DQo8YnIvPg0KPHA+PGk+QWRkZWQgdGhlIGZvbGxvd2luZyBmdW5jdGlvbnM6PC9pPjwvcD4NCjx1bCBjbGFzcz0iY29tbWVudHNfbGlzdCI+DQoJPGxpPkdyb3VwLkNyZWF0ZU9iamVjdCgpPC9saT4NCgk8bGk+R3JvdXAuRGVsZXRlT2JqZWN0KCk8L2xpPg0KCTxsaT5Hcm91cC5Jc09iamVjdCgpPC9saT4NCjwvdWw+DQpdXQ0KLS1bW1BsYW5uZWQgRmVhdHVyZXMNCjxwPjxiPkZ1bmN0aW9uczwvYj48L3A+DQo8dWwgY2xhc3M9ImNvbW1lbnRzX2xpc3RfcGxhbm5lZCI+DQoJPGxpPkdyb3VwLkRpc3RyaWJ1dGUodmVydGljYWwsaG9yaXpvbnRhbCk8L2xpPg0KCTxsaT5Hcm91cC5BbGlnblJlY3QobGVmdCwgdG9wLCBib3R0b20sIHJpZ2h0KTwvbGk+DQoJPGxpPkdyb3VwLlpvcmRlcigpPC9saT4NCgk8bGk+R3JvdXAuUmVjdENlbnRlcigpPC9saT4NCgk8bGk+R3JvdXAuU3RvcmVVbmNvbW1vblByb3BlcnRpZXMoKTwvbGk+DQo8L3VsPg0KXV0NCi0tIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjDQotLSBJUkxVQSBQTFVHSU4gSEVMUEVSIEZVTkNUSU9OUyBCeSBNaWNyb0J5dGUgKFJldmlzZWQgYnkgQ2VudGF1cmkgU29sZGllcikgfHxAIyR8fCBWRVJTSU9OIDIuOSB8fCQjQHx8IA0KLS0jIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMNCl9TaG93RXJyb3JFdmVudENvbnRleHQ9dHJ1ZS0tIHNldCB0aGlzIHRvIGZhbHNlIHRvIGRpc2FibGUgJ0V2ZW50Q29udGV4dCcgZGlzcGxheQ0KLS0jIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMNCmxvY2FsIElSTFVBX1BMVUdJTl9FUlJPUiA9IGVycm9yOw0KLS0jIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMNCi0tIFNldHMgYSBHbG9iYWwgZXJyb3IgbWVzc2FnZSBpbiB0aGUgcnVudGltZSBlbmdpbmUuDQpJUkxVQV9QTFVHSU5fU2V0R2xvYmFsRXJyb3JNZXNzYWdlID0gZnVuY3Rpb24obkNvZGUsIHNNZXNzYWdlKQ0KCWlmIF90YmxFcnJvck1lc3NhZ2VzW25Db2RlXSB0aGVuDQoJCWlmIF9TaG93RXJyb3JFdmVudENvbnRleHQgdGhlbg0KCQkJbG9jYWwgc0V2ZW50Q29udGV4dD1EZWJ1Zy5HZXRFdmVudENvbnRleHQoKQ0KCQkJSVJMVUFfUExVR0lOX0VSUk9SKCJFcnJvciBjb2RlICIuLm5Db2RlLi4iIGFscmVhZHkgaW4gdXNlLCBwbGVhc2UgdXNlIGFub3RoZXIuXHJcblxyXG5FdmVudENvbnRleHQ6ICIuLnNFdmVudENvbnRleHQsMikNCgkJZWxzZQ0KCQkJSVJMVUFfUExVR0lOX0VSUk9SKCJFcnJvciBjb2RlICIuLm5Db2RlLi4iIGFscmVhZHkgaW4gdXNlLCBwbGVhc2UgdXNlIGFub3RoZXIuIiwyKQ0KCQllbmQNCgllbHNlDQoJCV90YmxFcnJvck1lc3NhZ2VzW25Db2RlXT1zTWVzc2FnZQ0KCWVuZA0KZW5kDQotLSMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIw0KLS0gQ2hlY2tzIHRoZSBudW1iZXIgb2YgYXJndW1lbnRzIGluIHRoZSB0YWJsZSBhbmQgdGhyb3dzIGEgc3ludGF4IGVycm9yIElmIHRoZXJlIGFyZSBOb3QgZW5vdWdoLiANCi0tIFRoaXMgaXMgdXNlZnVsIEZvciBjaGVja2luZyB0aGUgbnVtYmVyIG9mIGFyZ3VtZW50cyBhdmFpbGFibGUgVG8geW91ciBhY2l0b24uDQpsb2NhbCBJUkxVQV9QTFVHSU5fQ2hlY2tOdW1BcmdzID0gZnVuY3Rpb24odGJBcmdzLG5BcmdzKSANCglsb2NhbCBuQ291bnQ9dGFibGUuZ2V0bih0YkFyZ3MpDQoJaWYgbkNvdW50IDwgbkFyZ3MgdGhlbg0KCQlpZiBfU2hvd0Vycm9yRXZlbnRDb250ZXh0IHRoZW4NCgkJCWxvY2FsIHNFdmVudENvbnRleHQ9RGVidWcuR2V0RXZlbnRDb250ZXh0KCkNCgkJCUlSTFVBX1BMVUdJTl9FUlJPUihuQXJncy4uIiBBcmd1bWVudHMgZXhwZWN0ZWQsICIuLm5Db3VudC4uIiBBcmd1bWVudHMgcGFzc2VkLlxyXG5cclxuRXZlbnRDb250ZXh0OiAiLi5zRXZlbnRDb250ZXh0LDMpDQoJCWVsc2UNCgkJCUlSTFVBX1BMVUdJTl9FUlJPUihuQXJncy4uIiBBcmd1bWVudHMgZXhwZWN0ZWQsICIuLm5Db3VudC4uIiBBcmd1bWVudHMgcGFzc2VkLiIsMykNCgkJZW5kDQoJZW5kDQplbmQNCi0tIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjDQotLSBDaGVja3MgdGhlIHZhbHVlIGF0IGEgZ2l2ZW4gYXJndW1lbnQgdGFibGUgcG9zaXRpb24gVG8gc2VlIGlmIGl0IGlzIGFueSBvZiB0aGUgc3BlY2lmaWVkIHR5cGVzLg0KLS0gSWYgTm90IGl0IHRocm93cyBhIHN5bnRheCBlcnJvci4NCi0tUG9zc2libGUgdmFyaWFibGUgdHlwZXNbIGJvb2xlYW4sIGZ1bmN0aW9uLCBuaWwsIG51bWJlciwgc3RyaW5nLCB0YWJsZSwgdGhyZWFkLCB1c2VyZGF0YV0NCmxvY2FsIElSTFVBX1BMVUdJTl9DaGVja1R5cGVzID0gZnVuY3Rpb24odGJBcmdzLG5BcmcsdFR5cGVzKQ0KbG9jYWwgc1R5cGUgPSB0eXBlKHRiQXJnc1tuQXJnXSk7DQpsb2NhbCBuVG90YWxUeXBlcyA9IFRhYmxlLkNvdW50KHRUeXBlcyk7DQpsb2NhbCBuU3RyaWtlcyA9IDA7DQpsb2NhbCBzQWxsb3dlZFR5cGVzID0gIiI7DQoNCmZvciBuSW5kZXgsIHNBbGxvd2VkVHlwZSBpbiBwYWlycyh0VHlwZXMpIGRvDQoJDQoJaWYgbkluZGV4IDwgKG5Ub3RhbFR5cGVzIC0gMSkgdGhlbg0KCXNBbGxvd2VkVHlwZXMgPSBzQWxsb3dlZFR5cGVzLi4iICIuLnNBbGxvd2VkVHlwZS4uIiwiOw0KCWVsc2VpZiBuSW5kZXggPT0gblRvdGFsVHlwZXMgLSAxIHRoZW4NCglzQWxsb3dlZFR5cGVzID0gc0FsbG93ZWRUeXBlcy4uIiAiLi5zQWxsb3dlZFR5cGU7DQoJZWxzZWlmIG5JbmRleCA9PSBuVG90YWxUeXBlcyB0aGVuDQoJCWlmIG5Ub3RhbFR5cGVzID09IDEgdGhlbg0KCQlzQWxsb3dlZFR5cGVzID0gIiAiLi5zQWxsb3dlZFR5cGU7DQoJCWVsc2UNCgkJc0FsbG93ZWRUeXBlcyA9IHNBbGxvd2VkVHlwZXMuLiIgb3IgIi4uc0FsbG93ZWRUeXBlOw0KCQllbmQNCgllbmQNCgkNCglpZiBzVHlwZSB+PSBTdHJpbmcuTG93ZXIoc0FsbG93ZWRUeXBlKSB0aGVuDQoJblN0cmlrZXMgPSBuU3RyaWtlcyArIDE7DQoJZW5kDQplbmQNCg0KaWYgblN0cmlrZXMgPT0gblRvdGFsVHlwZXMgdGhlbg0KCWlmIF9TaG93RXJyb3JFdmVudENvbnRleHQgdGhlbg0KCWxvY2FsIHNFdmVudENvbnRleHQ9RGVidWcuR2V0RXZlbnRDb250ZXh0KCkNCglJUkxVQV9QTFVHSU5fRVJST1IoImJhZCBhcmd1bWVudCAjIiAuLiBuQXJnIC4uICIsIG11c3QgYmUgYSAiLi5zQWxsb3dlZFR5cGVzLi4iLCB5b3UgcGFzc2VkIGEgIi4uc1R5cGUuLiIuXHJcblxyXG5FdmVudENvbnRleHQ6ICIuLnNFdmVudENvbnRleHQsMykNCgllbHNlDQoJSVJMVUFfUExVR0lOX0VSUk9SKCJiYWQgYXJndW1lbnQgIyIgLi4gbkFyZyAuLiAiLCBtdXN0IGJlIGEgIi4uc0FsbG93ZWRUeXBlcy4uIiwgeW91IHBhc3NlZCBhICIuLnNUeXBlLi4iLiIsMykNCgllbmQNCmVsc2UNCnJldHVybiB0YkFyZ3NbbkFyZ10NCmVuZA0KZW5kDQotLSMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIw0KLS0gRW5zdXJlcyB0aGF0IHlvdXIgdGFibGUgY29udGFpbnMgZGF0YSBvZiBvbmx5IHRoZSBzcGVjaWZpZWQgdHlwZS4gSWYgaXQgZG9lcyBub3QgdGhlbiBmYWxzZSBpcyByZXR1cm5lZC4NCi0tIFRoaXMgd2lsbCBzZWUgbmlsIHZhbHVlcyBhcyBzdWJ0YWJsZSBkZWNsYXJhdGlvbnMgYW5kIHdpbGwsIHRoZXJlZm9yZSwgaWdub3JlIHRoZW0uDQpsb2NhbCBJUkxVQV9QTFVHSU5fQ2hlY2tUYWJsZVZhcnMgPSBmdW5jdGlvbih0VGFibGUsdFZhclR5cGVzKQ0KbG9jYWwgYlJldCA9IHRydWU7DQpsb2NhbCBuVHlwZXMgPSBUYWJsZS5Db3VudCh0VmFyVHlwZXMpOw0KbG9jYWwgblN0cmlrZXMgPSAwOw0KDQpmb3IgbkluZGV4LCBzSXRlbSBpbiBwYWlycyh0VGFibGUpIGRvDQpuU3RyaWtlcyA9IDA7DQoNCglmb3IgblR5cGUsIHNUeXBlIGluIHBhaXJzKHRWYXJUeXBlcykgZG8NCg0KCQlpZiB0eXBlKHNJdGVtKSB+PSBzVHlwZSB0aGVuDQoJCW5TdHJpa2VzID0gblN0cmlrZXMgKyAxOw0KCQllbmQNCgkJCQ0KCWVuZA0KCQ0KCWlmIG5TdHJpa2VzID49IG5UeXBlcyB0aGVuDQoJYlJldCA9IGZhbHNlOw0KCWJyZWFrOw0KCWVuZA0KDQplbmQNCnJldHVybiBiUmV0DQplbmQNCi0tIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjDQotLSBDb252ZXJ0cyBjZXJ0YWluIGRhdGF0eXBlcyBpbnRvIG90aGVyIGRhdGF0eXBlcyB8fHwgU3VwcG9ydGVkIFR5cGVzIHx8fA0KLS0gW1N0cmluZyA8LT4gQm9vbGVhbl0gW051bWJlciA8LT4gQm9vbGVhbl0gW1N0cmluZyA8LT4gTnVtYmVyXQ0KLS0jIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMNCmxvY2FsIENPTlZFUlQgPSBmdW5jdGlvbiAodklucHV0LCBzTmV3VHlwZSkNCmxvY2FsIHNPbGRUeXBlID0gdHlwZSh2SW5wdXQpOw0KDQppZiBzTmV3VHlwZSA9PSAiYm9vbGVhbiIgdGhlbg0KDQoJaWYgc09sZFR5cGUgPT0gInN0cmluZyIgdGhlbg0KDQoJCWlmIFN0cmluZy5Mb3dlcih2SW5wdXQpID09ICJ0cnVlIiB0aGVuDQoJCXJldHVybiB0cnVlDQoJCWVsc2VpZiBTdHJpbmcuTG93ZXIodklucHV0KSA9PSAiZmFsc2UiIHRoZW4NCgkJcmV0dXJuIGZhbHNlDQoJCWVuZA0KCQkNCgllbHNlaWYgc09sZFR5cGUgPT0gIm51bWJlciIgdGhlbg0KCQkNCgkJaWYgdklucHV0ID09IDAgdGhlbg0KCQlyZXR1cm4gZmFsc2UNCgkJZWxzZWlmIHZJbnB1dCA9PSAxIHRoZW4NCgkJcmV0dXJuIHRydWUNCgkJZW5kDQoJDQoJZW5kDQoNCmVsc2VpZiBzTmV3VHlwZSA9PSAic3RyaW5nIgl0aGVuDQoJDQoJaWYgc09sZFR5cGUgPT0gImJvb2xlYW4iIHRoZW4NCgkNCgkJaWYgdklucHV0ID09IHRydWUgdGhlbg0KCQlyZXR1cm4gInRydWUiDQoJCWVsc2VpZiB2SW5wdXQgPT0gZmFsc2UgdGhlbg0KCQlyZXR1cm4gImZhbHNlIg0KCQllbmQNCgkNCgllbHNlaWYgc09sZFR5cGUgPT0gIm51bWJlciIgdGhlbg0KCXJldHVybiAiIi4udklucHV0Li4iIgkNCgllbmQNCg0KZWxzZWlmIHNOZXdUeXBlID09ICJudW1iZXIiIHRoZW4NCgkNCglpZiBzT2xkVHlwZSA9PSAiYm9vbGVhbiIgdGhlbg0KCQ0KCQlpZiB2SW5wdXQgPT0gdHJ1ZSB0aGVuDQoJCXJldHVybiAxDQoJCWVsc2VpZiB2SW5wdXQgPT0gZmFsc2UgdGhlbg0KCQlyZXR1cm4gMA0KCQllbmQNCgkNCgllbHNlaWYgc09sZFR5cGUgPT0gInN0cmluZyIgdGhlbg0KCQ0KCXJldHVybiB0b251bWJlcih2SW5wdXQpOwkJCQkNCgkJCQkNCgllbmQNCg0KZW5kDQplbmQNCi0tIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjDQotLUVSUk9SIFBMVUdJTiBERVRBSUxTDQpsb2NhbCBFUlJPUl9QTFVHSU5fTkFNRSA9ICJHcm91cCI7DQotLSMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIw0KLS1EaXNwbGF5cyBhIGN1c3RvbSBlcnJvciBtZXNzYWdlIHVzaW5nIHRoZSBwbHVnaW4gYW5kIGZ1bmN0aW9uIG5hbWUgYW5kIGxpc3RzIHRoZSBldmVudCBjb250ZXh0IGFzIHdlbGwuDQpsb2NhbCBFUlJPUiA9IGZ1bmN0aW9uKHNGdW5jdGlvbk5hbWUsc01lc3NhZ2UsbkVtYmVkTGV2ZWwpDQoNCmlmIG5vdCBuRW1iZWRMZXZlbCB0aGVuDQpuRW1iZWRMZXZlbCA9IDA7DQplbHNlaWYgdHlwZShuRW1iZWRMZXZlbCkgfj0gIm51bWJlciIgdGhlbg0KbkVtYmVkTGV2ZWwgPSAwOw0KZW5kDQoNCmlmIHR5cGUoc0Z1bmN0aW9uTmFtZSkgfj0gInN0cmluZyIgdGhlbg0Kc0Z1bmN0aW9uTmFtZSA9ICIiOw0KZW5kCQ0KDQpsb2NhbCBzRnVuY3Rpb25OYW1lQ29kZSA9ICIiOw0KaWYgU3RyaW5nLlJlcGxhY2Uoc0Z1bmN0aW9uTmFtZSwgIiAiLCAiIiwgZmFsc2UpIH49ICIiIHRoZW4NCnNGdW5jdGlvbk5hbWVDb2RlID0gIiwgZnVuY3Rpb24gXCIiLi5zRnVuY3Rpb25OYW1lLi4iKClcIiI7DQplbmQNCg0KSVJMVUFfUExVR0lOX0VSUk9SKCJcclxuRXJyb3IgaW4gXCIiLi5FUlJPUl9QTFVHSU5fTkFNRS4uIlwiIHBsdWdpbiIuLnNGdW5jdGlvbk5hbWVDb2RlLi4iXHJcblxyXG4iLi5zTWVzc2FnZS4uIlxyXG5cclxuRXZlbnRDb250ZXh0OiAiLi5EZWJ1Zy5HZXRFdmVudENvbnRleHQoKSwzICsgbkVtYmVkTGV2ZWwpOw0KZW5kDQotLSMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIw0KLS1UaHJvd3MgYW5kIGVycm9yIGlmIHRoZSByZXF1aXJlZCBwbHVnaW4gaXMgbm90IGxvYWRlZC4gVGhpcyBzaG91bGQgYmUgY2FsbGVkIGF0IHRoZSBjYWxsZWQgYXQgdGhlDQotLWJlZ2lubmluZyBvZiBlYWNoIGZ1bmN0aW9uLCBvbmNlIGZvciBlYWNoIHJlcXVpcmVkIHBsdWdpbi4NCi0tTk9URTogVGhpcyBtYXkgYmUgY2FsbGVkIGF0IG9uY2Ugb25seSBhdCB0aGUgc3RhcnQgb2YgeW91ciBwbHVnaW4gc2NyaXB0IGlmIHRoZSByZXF1aXJlZCBwbHVnaW4gaXMgYWZ0ZXIgeW91ciBwbHVnaW4gYWxwaGFiZXRpY2FsbHkNCmxvY2FsIFJFUVVJUkUgPSBmdW5jdGlvbih0UGx1Z2luLHNQbHVnaW5OYW1lKQ0KaWYgbm90IHRQbHVnaW4gdGhlbg0KSVJMVUFfUExVR0lOX0VSUk9SKCJcclxuRXJyb3IgbG9hZGluZyB0aGUgXCIiLi5FUlJPUl9QTFVHSU5fTkFNRS4uIlwiIHBsdWdpbi5cclxuVGhpcyBwbHVnaW4gcmVxdWlyZXMgdGhlIFwiIi4uc1BsdWdpbk5hbWUuLiJcIiBwbHVnaW4uIik7DQplbmQNCmVuZA0KLS0jIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMNCi0tIEVORCBJUkxVQSBQTFVHSU4gSEVMUEVSIEZVTkNUSU9OUw0KLS0jIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMNCkdyb3VwID0ge307DQpsb2NhbCBfR1JPVVBTID0ge307DQpsb2NhbCBfR1JPVVBfQkFOSyA9IHt9Ow0KbG9jYWwgX0dST1VQX1RFTVAgPSB7fTsNCg0KLS1maXhlcyB0aGUgaG90c3BvdCBidWcgc2luY2UgaG90c3BvdHMgYXJlIG5ldmVyIHZpc2libGUNCmZ1bmN0aW9uIEhvdHNwb3QuSXNWaXNpYmxlKCkNCnJldHVybiBmYWxzZQ0KZW5kDQoNCmZ1bmN0aW9uIEhvdHNwb3QuU2V0VmlzaWJsZSgpDQoNCmVuZA0KDQpsb2NhbCB0VHlwZXMgPSB7fTsNCnRUeXBlc1tPQkpFQ1RfQlVUVE9OXSA9IEJ1dHRvbjsNCnRUeXBlc1tPQkpFQ1RfQ0hFQ0tCT1hdID0gQ2hlY2tCb3g7DQp0VHlwZXNbT0JKRUNUX0NPTUJPQk9YXSA9IENvbWJvQm94Ow0KdFR5cGVzW09CSkVDVF9GTEFTSF0gPSBGbGFzaDsNCnRUeXBlc1tPQkpFQ1RfR1JJRF0gPSBHcmlkOw0KdFR5cGVzW09CSkVDVF9IT1RTUE9UXSA9IEhvdHNwb3Q7DQp0VHlwZXNbT0JKRUNUX0lNQUdFXSA9IEltYWdlOw0KdFR5cGVzW09CSkVDVF9JTlBVVF0gPSBJbnB1dDsNCnRUeXBlc1tPQkpFQ1RfTEFCRUxdID0gTGFiZWw7DQp0VHlwZXNbT0JKRUNUX0xJU1RCT1hdID0gTGlzdEJveDsNCnRUeXBlc1tPQkpFQ1RfUEFSQUdSQVBIXSA9IFBhcmFncmFwaDsNCnRUeXBlc1tPQkpFQ1RfUERGXSA9IFBERjsNCnRUeXBlc1tPQkpFQ1RfUExVR0lOXSA9IFBsdWdpbjsNCnRUeXBlc1tPQkpFQ1RfUFJPR1JFU1NdID0gUHJvZ3Jlc3M7DQp0VHlwZXNbT0JKRUNUX1FVSUNLVElNRV0gPSBRdWlja1RpbWU7DQp0VHlwZXNbT0JKRUNUX1JBRElPQlVUVE9OXSA9IFJhZGlvQnV0dG9uOw0KdFR5cGVzW09CSkVDVF9SSUNIVEVYVF0gPSBSaWNoVGV4dDsNCnRUeXBlc1tPQkpFQ1RfU0xJREVTSE9XXSA9IFNsaWRlU2hvdzsNCnRUeXBlc1tPQkpFQ1RfVFJFRV0gPSBUcmVlOw0KdFR5cGVzW09CSkVDVF9WSURFT10gPSBWaWRlbzsNCnRUeXBlc1tPQkpFQ1RfV0VCXSA9IFdlYjsNCnRUeXBlc1tPQkpFQ1RfWEJVVFRPTl0gPSB4QnV0dG9uOw0KDQotLWxvY2FsIGZ1bmN0aW9uIGZBY3Rpb24obk9iamVjdFR5cGUpDQotLXJldHVybiB0VHlwZXNbbk9iamVjdFR5cGVdDQotLWVuZA0KDQpsb2NhbCBmdW5jdGlvbiBHZXRPYmplY3RUeXBlKHNPYmplY3QpDQppZiBBcHBsaWNhdGlvbi5HZXRDdXJyZW50UGFnZSgpIH49ICIiIHRoZW4NCnJldHVybiBQYWdlLkdldE9iamVjdFR5cGUoc09iamVjdCkNCmVsc2UNCnJldHVybiBEaWFsb2dFeC5HZXRPYmplY3RUeXBlKHNPYmplY3QpDQplbmQNCmVuZA0KDQoNCmxvY2FsIGZ1bmN0aW9uIFRyYW5zZmVyVGFibGVEYXRhKHRTb3VyY2UsIHNTb3VyY2VLZXksIHRUYXJnZXQsIHNUYXJnZXRLZXksIGJTYXZlT3JpZ2luYWxEYXRhKQ0KaWYgbm90IGJTYXZlT3JpZ2luYWxEYXRhIHRoZW4NCnRUYXJnZXRbc1RhcmdldEtleV0gPSB7fTsNCmVuZA0KCQ0KZm9yIHNPYmplY3QsIHRBdHQgaW4gcGFpcnModFNvdXJjZVtzU291cmNlS2V5XSkgZG8NCnRUYXJnZXRbc1RhcmdldEtleV1bc09iamVjdF0gPSB7fTsNCnRUYXJnZXRbc1RhcmdldEtleV1bc09iamVjdF0uWCA9IHRBdHQuWDsNCnRUYXJnZXRbc1RhcmdldEtleV1bc09iamVjdF0uWSA9IHRBdHQuWTsNCnRUYXJnZXRbc1RhcmdldEtleV1bc09iamVjdF0uV2lkdGggPSB0QXR0LldpZHRoOw0KdFRhcmdldFtzVGFyZ2V0S2V5XVtzT2JqZWN0XS5IZWlnaHQgPSB0QXR0LkhlaWdodDsNCnRUYXJnZXRbc1RhcmdldEtleV1bc09iamVjdF0uSXNFbmFibGVkID0gdEF0dC5Jc0VuYWJsZWQ7DQp0VGFyZ2V0W3NUYXJnZXRLZXldW3NPYmplY3RdLklzVmlzaWJsZSA9IHRBdHQuSXNWaXNpYmxlOw0KdFRhcmdldFtzVGFyZ2V0S2V5XVtzT2JqZWN0XS5UeXBlID0gdEF0dC5UeXBlOw0KZW5kDQplbmQNCg0KLS1bW1JldHVybiBDb2Rlcw0KMCAgTm9ybWFsL1N1Y2Nlc3NmdWwgT3BlcmF0aW9uDQotMSBWYXJpZXMNCi0yIEdyb3VwIERvZXMgTm90IEV4aXN0DQotMyBPYmplY3QgSXMgTm90IEluIEdyb3VwDQpdXQ0KDQotLSEhISA9IFRlc3RlZCBhbmQgV29ya2luZw0KDQotLT09PT09PT09PT09PT09PT09PT09PT09PT0hISENCi0tIEdyb3VwLkFkZE9iamVjdA0KLS09PT09PT09PT09PT09PT09PT09PT09PT09DQpmdW5jdGlvbiBHcm91cC5BZGRPYmplY3QoLi4uKQ0KSVJMVUFfUExVR0lOX0NoZWNrTnVtQXJncyhhcmcsMikNCmxvY2FsIHNHcm91cE5hbWUgPSBJUkxVQV9QTFVHSU5fQ2hlY2tUeXBlcyhhcmcsMSx7InN0cmluZyJ9KQ0KbG9jYWwgc09iamVjdE5hbWUgPSBJUkxVQV9QTFVHSU5fQ2hlY2tUeXBlcyhhcmcsMix7InN0cmluZyJ9KQ0KLS08PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8DQppZiBHcm91cC5PYmplY3REb2VzRXhpc3Qoc09iamVjdE5hbWUpIHRoZW4NCg0KCWlmIG5vdCBHcm91cC5Eb2VzRXhpc3Qoc0dyb3VwTmFtZSkgdGhlbg0KCUdyb3VwLkNyZWF0ZShzR3JvdXBOYW1lKTsNCgllbmQNCgkNCglpZiBub3QgR3JvdXAuT2JqZWN0SXNJbkdyb3VwKHNHcm91cE5hbWUsIHNPYmplY3ROYW1lKSB0aGVuDQoJDQoJX0dST1VQU1tzR3JvdXBOYW1lXVtzT2JqZWN0TmFtZV0gPSB7fTsNCglsb2NhbCBfT2JqZWN0ID0gX0dST1VQU1tzR3JvdXBOYW1lXVtzT2JqZWN0TmFtZV07DQoJbG9jYWwgblR5cGUgPSBHZXRPYmplY3RUeXBlKHNPYmplY3ROYW1lKTsNCglsb2NhbCBmQWN0aW9uID0gdFR5cGVzW25UeXBlXTsNCglsb2NhbCB0UG9zID0gZkFjdGlvbi5HZXRQb3Moc09iamVjdE5hbWUpOw0KCWxvY2FsIHRTaXplID0gZkFjdGlvbi5HZXRTaXplKHNPYmplY3ROYW1lKTsNCgkNCglfT2JqZWN0LlggPSB0UG9zLlg7DQoJX09iamVjdC5ZID0gdFBvcy5ZOw0KCV9PYmplY3QuV2lkdGggPSB0U2l6ZS5XaWR0aDsNCglfT2JqZWN0LkhlaWdodCA9IHRTaXplLkhlaWdodDsNCglfT2JqZWN0LklzRW5hYmxlZCA9IGZBY3Rpb24uSXNFbmFibGVkKHNPYmplY3ROYW1lKTsNCglfT2JqZWN0LklzVmlzaWJsZSA9IGZBY3Rpb24uSXNWaXNpYmxlKHNPYmplY3ROYW1lKTsNCglfT2JqZWN0LlR5cGUgPSBuVHlwZTsNCglyZXR1cm4gMA0KCWVsc2UNCglyZXR1cm4gMQ0KCWVuZA0KDQplbHNlDQpyZXR1cm4gLTENCmVuZA0KDQplbmQNCg0KDQoNCi0tPT09PT09PT09PT09PT09PT09PT09PT09PSEhIQ0KLS0gR3JvdXAuQWRqdXN0UG9zDQotLT09PT09PT09PT09PT09PT09PT09PT09PT0NCmZ1bmN0aW9uIEdyb3VwLkFkanVzdFBvcyguLi4pDQpJUkxVQV9QTFVHSU5fQ2hlY2tOdW1BcmdzKGFyZywzKQ0KbG9jYWwgc0dyb3VwTmFtZSA9IElSTFVBX1BMVUdJTl9DaGVja1R5cGVzKGFyZywxLHsic3RyaW5nIn0pOw0KbG9jYWwgblggPSBJUkxVQV9QTFVHSU5fQ2hlY2tUeXBlcyhhcmcsMix7Im51bWJlciJ9KTsNCmxvY2FsIG5ZID0gSVJMVUFfUExVR0lOX0NoZWNrVHlwZXMoYXJnLDMseyJudW1iZXIifSk7DQotLTw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDwNCmlmIEdyb3VwLkRvZXNFeGlzdChzR3JvdXBOYW1lKSB0aGVuDQpBcHBsaWNhdGlvbi5TZXRSZWRyYXcoZmFsc2UpOw0KCQ0KCWlmIG5YIH49IDAgb3Igblkgfj0gMCB0aGVuDQoJCQ0KCQlpZiBuWCA9PSAwIHRoZW4NCgkJCQ0KCQkJZm9yIHNPYmplY3QsIHRBdHQgaW4gcGFpcnMoX0dST1VQU1tzR3JvdXBOYW1lXSkgZG8NCgkJCWxvY2FsIGZBY3Rpb24gPSB0VHlwZXNbdEF0dC5UeXBlXTsNCgkJCXRBdHQuWSA9IHRBdHQuWSArIG5ZOw0KCQkJZkFjdGlvbi5TZXRQb3Moc09iamVjdCx0QXR0LlgsdEF0dC5ZKTsNCgkJCWVuZA0KCQkNCgkJZWxzZWlmIG5ZID09IDAgdGhlbg0KCQkJDQoJCQlmb3Igc09iamVjdCwgdEF0dCBpbiBwYWlycyhfR1JPVVBTW3NHcm91cE5hbWVdKSBkbw0KCQkJbG9jYWwgZkFjdGlvbiA9IHRUeXBlc1t0QXR0LlR5cGVdOw0KCQkJdEF0dC5YID0gdEF0dC5YICsgblg7DQoJCQlmQWN0aW9uLlNldFBvcyhzT2JqZWN0LHRBdHQuWCx0QXR0LlkpOw0KCQkJZW5kDQoJCQ0KCWVsc2UNCgkJDQoJCQlmb3Igc09iamVjdCwgdEF0dCBpbiBwYWlycyhfR1JPVVBTW3NHcm91cE5hbWVdKSBkbw0KCQkJbG9jYWwgZkFjdGlvbiA9IHRUeXBlc1t0QXR0LlR5cGVdOw0KCQkJdEF0dC5YID0gdEF0dC5YICsgblg7DQoJCQl0QXR0LlkgPSB0QXR0LlkgKyBuWTsNCgkJCWZBY3Rpb24uU2V0UG9zKHNPYmplY3QsdEF0dC5YLHRBdHQuWSk7DQoJCQllbmQNCgkJCQkNCgkJZW5kCQ0KCQkJCQ0KCWVuZA0KCQ0KQXBwbGljYXRpb24uU2V0UmVkcmF3KHRydWUpOw0KcmV0dXJuIDANCmVsc2UNCnJldHVybiAtMg0KZW5kDQplbmQNCg0KDQoNCi0tPT09PT09PT09PT09PT09PT09PT09PT09PSEhIQ0KLS0gR3JvdXAuQWRqdXN0U2l6ZQ0KLS09PT09PT09PT09PT09PT09PT09PT09PT09DQpmdW5jdGlvbiBHcm91cC5BZGp1c3RTaXplKC4uLikNCklSTFVBX1BMVUdJTl9DaGVja051bUFyZ3MoYXJnLDMpDQpsb2NhbCBzR3JvdXBOYW1lID0gSVJMVUFfUExVR0lOX0NoZWNrVHlwZXMoYXJnLDEseyJzdHJpbmcifSk7DQpsb2NhbCBuV2lkdGggPSBJUkxVQV9QTFVHSU5fQ2hlY2tUeXBlcyhhcmcsMix7Im51bWJlciJ9KTsNCmxvY2FsIG5IZWlnaHQgPSBJUkxVQV9QTFVHSU5fQ2hlY2tUeXBlcyhhcmcsMyx7Im51bWJlciJ9KTsNCi0tPDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PA0KaWYgR3JvdXAuRG9lc0V4aXN0KHNHcm91cE5hbWUpIHRoZW4NCkFwcGxpY2F0aW9uLlNldFJlZHJhdyhmYWxzZSk7DQoJDQoJaWYgbldpZHRoIH49IDAgb3IgbkhlaWdodCB+PSAwIHRoZW4NCgkJDQoJCWlmIG5XaWR0aCA9PSAwIHRoZW4NCgkJCQ0KCQkJZm9yIHNPYmplY3QsIHRBdHQgaW4gcGFpcnMoX0dST1VQU1tzR3JvdXBOYW1lXSkgZG8NCgkJCWxvY2FsIGZBY3Rpb24gPSB0VHlwZXNbdEF0dC5UeXBlXTsNCgkJCXRBdHQuSGVpZ2h0ID0gdEF0dC5IZWlnaHQgKyBuSGVpZ2h0Ow0KCQkJZkFjdGlvbi5TZXRTaXplKHNPYmplY3QsdEF0dC5XaWR0aCx0QXR0LkhlaWdodCk7DQoJCQllbmQNCgkJDQoJCWVsc2VpZiBuSGVpZ2h0ID09IDAgdGhlbg0KCQkNCgkJCWZvciBzT2JqZWN0LCB0QXR0IGluIHBhaXJzKF9HUk9VUFNbc0dyb3VwTmFtZV0pIGRvDQoJCQlsb2NhbCBmQWN0aW9uID0gdFR5cGVzW3RBdHQuVHlwZV07DQoJCQl0QXR0LldpZHRoID0gdEF0dC5XaWR0aCArIG5XaWR0aDsNCgkJCWZBY3Rpb24uU2V0U2l6ZShzT2JqZWN0LHRBdHQuV2lkdGgsdEF0dC5IZWlnaHQpOw0KCQkJZW5kDQoJCQ0KCQllbHNlDQoJCQ0KCQkJZm9yIHNPYmplY3QsIHRBdHQgaW4gcGFpcnMoX0dST1VQU1tzR3JvdXBOYW1lXSkgZG8NCgkJCWxvY2FsIGZBY3Rpb24gPSB0VHlwZXNbdEF0dC5UeXBlXTsNCgkJCXRBdHQuV2lkdGggPSB0QXR0LldpZHRoICsgbldpZHRoOw0KCQkJdEF0dC5IZWlnaHQgPSB0QXR0LkhlaWdodCArIG5IZWlnaHQ7DQoJCQlmQWN0aW9uLlNldFNpemUoc09iamVjdCx0QXR0LldpZHRoLHRBdHQuSGVpZ2h0KTsNCgkJCWVuZA0KCQkJCQ0KCQllbmQNCgkNCgllbmQNCgkNCkFwcGxpY2F0aW9uLlNldFJlZHJhdyh0cnVlKTsNCmVsc2UNCnJldHVybiAtMg0KZW5kDQplbmQNCg0KDQoNCi0tPT09PT09PT09PT09PT09PT09PT09PT09PSEhIQ0KLS0gR3JvdXAuQ2xlYXJTZXR0aW5ncw0KLS09PT09PT09PT09PT09PT09PT09PT09PT09DQpmdW5jdGlvbiBHcm91cC5DbGVhclNldHRpbmdzKC4uLikNCklSTFVBX1BMVUdJTl9DaGVja051bUFyZ3MoYXJnLDEpDQpsb2NhbCBzS2V5ID0gSVJMVUFfUExVR0lOX0NoZWNrVHlwZXMoYXJnLDEseyJzdHJpbmcifSk7DQotLTw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDwNCmlmIF9HUk9VUF9CQU5LW3NLZXldIHRoZW4NCl9HUk9VUF9CQU5LW3NLZXldID0gbmlsOw0KcmV0dXJuIDANCmVsc2UNCnJldHVybiAtMQ0KZW5kDQplbmQNCg0KDQoNCi0tPT09PT09PT09PT09PT09PT09PT09PT09PSEhIQ0KLS0gR3JvdXAuQ291bnQNCi0tPT09PT09PT09PT09PT09PT09PT09PT09PQ0KZnVuY3Rpb24gR3JvdXAuQ291bnQoLi4uKQ0KSVJMVUFfUExVR0lOX0NoZWNrTnVtQXJncyhhcmcsMSkNCmxvY2FsIHNHcm91cE5hbWUgPSBJUkxVQV9QTFVHSU5fQ2hlY2tUeXBlcyhhcmcsMSx7InN0cmluZyJ9KTsNCi0tPDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PAkNCmlmIEdyb3VwLkRvZXNFeGlzdChzR3JvdXBOYW1lKSB0aGVuDQpyZXR1cm4gVGFibGUuQ291bnQoX0dST1VQU1tzR3JvdXBOYW1lXSkNCmVsc2UNCnJldHVybiAtMg0KZW5kDQplbmQNCg0KDQoNCi0tPT09PT09PT09PT09PT09PT09PT09PT09PT09ISEhDQotLSBHcm91cC5DcmVhdGUNCi0tPT09PT09PT09PT09PT09PT09PT09PT09PT09DQpmdW5jdGlvbiBHcm91cC5DcmVhdGUoLi4uKQ0KSVJMVUFfUExVR0lOX0NoZWNrTnVtQXJncyhhcmcsMSk7DQpsb2NhbCBzR3JvdXBOYW1lID0gSVJMVUFfUExVR0lOX0NoZWNrVHlwZXMoYXJnLDEseyJzdHJpbmcifSk7DQotLTw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDwNCmlmIG5vdCBfR1JPVVBTW3NHcm91cE5hbWVdIHRoZW4NCl9HUk9VUFNbc0dyb3VwTmFtZV0gPSB7fTsNCnJldHVybiAwDQplbHNlDQpyZXR1cm4gMQ0KZW5kDQoNCmVuZA0KDQoNCg0KLS09PT09PT09PT09PT09PT09PT09PT09PT09ISEhDQotLSBHcm91cC5DcmVhdGVPYmplY3QNCi0tPT09PT09PT09PT09PT09PT09PT09PT09PQ0KZnVuY3Rpb24gR3JvdXAuQ3JlYXRlT2JqZWN0KC4uLikNCklSTFVBX1BMVUdJTl9DaGVja051bUFyZ3MoYXJnLDQpDQpsb2NhbCBzR3JvdXBOYW1lID0gSVJMVUFfUExVR0lOX0NoZWNrVHlwZXMoYXJnLDEseyJzdHJpbmcifSk7DQpsb2NhbCBzT2JqZWN0TmFtZSA9IElSTFVBX1BMVUdJTl9DaGVja1R5cGVzKGFyZywyLHsic3RyaW5nIn0pOw0KbG9jYWwgbk9iamVjdFR5cGUgPSBJUkxVQV9QTFVHSU5fQ2hlY2tUeXBlcyhhcmcsMyx7Im51bWJlciJ9KTsNCmxvY2FsIHRiT2JqZWN0UHJvcHMgPSBJUkxVQV9QTFVHSU5fQ2hlY2tUeXBlcyhhcmcsNCx7InRhYmxlIn0pOw0KLS08PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8DQppZiBBcHBsaWNhdGlvbi5HZXRDdXJyZW50UGFnZSB+PSAiIiB0aGVuDQpQYWdlLkNyZWF0ZU9iamVjdChuT2JqZWN0VHlwZSxzT2JqZWN0TmFtZSx0Yk9iamVjdFByb3BzKTsNCmVsc2UNCkRpYWxvZ0V4LkNyZWF0ZU9iamVjdChuT2JqZWN0VHlwZSxzT2JqZWN0TmFtZSx0Yk9iamVjdFByb3BzKTsNCmVuZA0KDQpsb2NhbCBuRXJyb3IgPSBBcHBsaWNhdGlvbi5HZXRMYXN0RXJyb3IoKTsNCg0KaWYgbkVycm9yIH49IDAgdGhlbg0KcmV0dXJuIG5FcnJvcg0KZWxzZQ0KR3JvdXAuQWRkT2JqZWN0KHNHcm91cE5hbWUsIHNPYmplY3ROYW1lKTsNCnJldHVybiAwDQplbmQNCg0KZW5kDQoNCg0KDQotLT09PT09PT09PT09PT09PT09PT09PT09PT09PSEhIQ0KLS0gR3JvdXAuRGVsZXRlDQotLT09PT09PT09PT09PT09PT09PT09PT09PT09PQ0KZnVuY3Rpb24gR3JvdXAuRGVsZXRlKC4uLikNCklSTFVBX1BMVUdJTl9DaGVja051bUFyZ3MoYXJnLDEpOw0KbG9jYWwgc0dyb3VwTmFtZSA9IElSTFVBX1BMVUdJTl9DaGVja1R5cGVzKGFyZywxLHsic3RyaW5nIn0pOw0KLS08PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8DQppZiBHcm91cC5Eb2VzRXhpc3Qoc0dyb3VwTmFtZSkgdGhlbg0KDQoJaWYgVGFibGUuQ291bnQoX0dST1VQU1tzR3JvdXBOYW1lXSkgPiAwIHRoZW4NCgkJDQoJCWZvciBzT2JqZWN0LCB0QXR0IGluIHBhaXJzKF9HUk9VUFNbc0dyb3VwTmFtZV0pIGRvDQoJCUdyb3VwLkRlbGV0ZU9iamVjdChzR3JvdXBOYW1lLCBzT2JqZWN0LCB0cnVlKTsNCgkJZW5kDQoJCQ0KCWVuZA0KCQ0KX0dST1VQU1tzR3JvdXBOYW1lXSA9IG5pbDsNCnJldHVybiAwDQplbHNlDQpyZXR1cm4gLTINCmVuZA0KZW5kDQoNCg0KDQotLT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PSEhIQ0KLS0gR3JvdXAuRGVsZXRlSW5hY3RpdmVTZXR0aW5ncw0KLS09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0NCmZ1bmN0aW9uIEdyb3VwLkRlbGV0ZUluYWN0aXZlU2V0dGluZ3MoLi4uKQ0KSVJMVUFfUExVR0lOX0NoZWNrTnVtQXJncyhhcmcsMSk7DQpsb2NhbCBzRmlsZSA9IElSTFVBX1BMVUdJTl9DaGVja1R5cGVzKGFyZywxLHsic3RyaW5nIn0pOw0KLS08PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8DQppZiBGaWxlLkRvZXNFeGlzdChzRmlsZSkgdGhlbg0KbG9jYWwgdEdyb3VwcyA9IEdyb3VwLkdldEdyb3VwTmFtZXMoKTsNCg0KCWlmIHRHcm91cHMgdGhlbg0KCWxvY2FsIHRTZWN0aW9ucyA9IElOSUZpbGUuR2V0U2VjdGlvbk5hbWVzKHNGaWxlKTsNCgkJDQoJCWlmIHRTZWN0aW9ucyB0aGVuDQoJCQ0KCQkJZm9yIG5JbmRleCwgc1NlY3Rpb24gaW4gcGFpcnModFNlY3Rpb25zKSBkbw0KCQkJbG9jYWwgYkRlbGV0ZU1lID0gdHJ1ZTsNCgkJCQkNCgkJCQlmb3IgblN1YkluZGV4LCBzR3JvdXAgaW4gcGFpcnModEdyb3VwcykgZG8NCgkJCQkNCgkJCQkJaWYgc1NlY3Rpb24gPT0gc0dyb3VwIHRoZW4NCgkJCQkJYkRlbGV0ZU1lID0gZmFsc2U7CQkJCQkNCgkJCQkJZW5kDQoJCQkJCQ0KCQkJCWVuZA0KCQkJDQoJCQkJaWYgYkRlbGV0ZU1lIHRoZW4NCgkJCQlJTklGaWxlLkRlbGV0ZVNlY3Rpb24oc0ZpbGUsIHNTZWN0aW9uKTsNCgkJCQllbmQNCgkJCQkNCgkJCWVuZA0KCQkNCgkJZW5kDQoJCQ0KCWVuZA0KCQ0KcmV0dXJuIDANCmVsc2UNCnJldHVybiAtMQ0KZW5kDQplbmQNCg0KDQoNCi0tPT09PT09PT09PT09PT09PT09PT09PT09PSEhIQ0KLS0gR3JvdXAuRGVsZXRlT2JqZWN0DQotLT09PT09PT09PT09PT09PT09PT09PT09PT0NCmZ1bmN0aW9uIEdyb3VwLkRlbGV0ZU9iamVjdCguLi4pDQpJUkxVQV9QTFVHSU5fQ2hlY2tOdW1BcmdzKGFyZywzKQ0KbG9jYWwgc0dyb3VwTmFtZSA9IElSTFVBX1BMVUdJTl9DaGVja1R5cGVzKGFyZywxLHsic3RyaW5nIn0pOwkNCmxvY2FsIHNPYmplY3ROYW1lID0gSVJMVUFfUExVR0lOX0NoZWNrVHlwZXMoYXJnLDIseyJzdHJpbmcifSk7DQpsb2NhbCBiUmVtb3ZlR3JvdXAgPSBJUkxVQV9QTFVHSU5fQ2hlY2tUeXBlcyhhcmcsMyx7ImJvb2xlYW4ifSk7DQotLTw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDwJDQppZiBHcm91cC5Eb2VzRXhpc3Qoc0dyb3VwTmFtZSkgdGhlbg0KDQoJaWYgR3JvdXAuT2JqZWN0RG9lc0V4aXN0KHNPYmplY3ROYW1lKSB0aGVuDQoJDQoJCWlmIEdyb3VwLk9iamVjdElzSW5Hcm91cChzR3JvdXBOYW1lLCBzT2JqZWN0TmFtZSkgdGhlbg0KCQkJDQoJCQlpZiBBcHBsaWNhdGlvbi5HZXRDdXJyZW50UGFnZSgpIH49ICIiIHRoZW4NCgkJCVBhZ2UuRGVsZXRlT2JqZWN0KHNPYmplY3ROYW1lKTsNCgkJCV9HUk9VUFNbc0dyb3VwTmFtZV1bc09iamVjdE5hbWVdID0gbmlsOw0KCQkJCQ0KCQkJCWlmIGJSZW1vdmVHcm91cCBhbmQgVGFibGUuQ291bnQoX0dST1VQU1tzR3JvdXBOYW1lXSkgPT0gMCB0aGVuDQoJCQkJX0dST1VQU1tzR3JvdXBOYW1lXSA9IG5pbDsNCgkJCQlyZXR1cm4gMQ0KCQkJCWVuZA0KCQkJCQ0KCQkJcmV0dXJuIDANCgkJCWVsc2VpZiBBcHBsaWNhdGlvbi5HZXRDdXJyZW50RGlhbG9nKCkgfj0gIiIgdGhlbg0KCQkJRGlhbG9nRXguRGVsZXRlT2JqZWN0KHNPYmplY3ROYW1lKTsNCgkJCV9HUk9VUFNbc0dyb3VwTmFtZV1bc09iamVjdE5hbWVdID0gbmlsOw0KCQkJCQ0KCQkJCWlmIGJSZW1vdmVHcm91cCBhbmQgVGFibGUuQ291bnQoX0dST1VQU1tzR3JvdXBOYW1lXSkgPT0gMCB0aGVuDQoJCQkJX0dST1VQU1tzR3JvdXBOYW1lXSA9IG5pbDsNCgkJCQlyZXR1cm4gMQ0KCQkJCWVuZA0KCQkJCQ0KCQkJcmV0dXJuIDANCgkJCWVuZA0KCQkJCQ0KCQllbHNlDQoJCXJldHVybiAtMw0KCQllbmQNCgkJDQoJCQ0KCWVsc2UNCglyZXR1cm4gLTENCgllbmQNCgkNCmVsc2UNCnJldHVybiAtMg0KZW5kDQplbmQNCg0KDQoNCi0tPT09PT09PT09PT09PT09PT09PT09PT09PT09ISEhDQotLSBHcm91cC5Eb2VzRXhpc3QNCi0tPT09PT09PT09PT09PT09PT09PT09PT09PT09DQpmdW5jdGlvbiBHcm91cC5Eb2VzRXhpc3QoLi4uKQ0KSVJMVUFfUExVR0lOX0NoZWNrTnVtQXJncyhhcmcsMSk7DQpsb2NhbCBzR3JvdXBOYW1lID0gSVJMVUFfUExVR0lOX0NoZWNrVHlwZXMoYXJnLDEseyJzdHJpbmcifSk7DQotLTw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDwNCmlmIF9HUk9VUFNbc0dyb3VwTmFtZV0gdGhlbg0KcmV0dXJuIHRydWUNCmVsc2UNCnJldHVybiBmYWxzZQ0KZW5kDQplbmQNCg0KDQoNCi0tPT09PT09PT09PT09PT09PT09PT09PT09PSEhIQ0KLS0gR3JvdXAuRW51bWVyYXRlDQotLT09PT09PT09PT09PT09PT09PT09PT09PT0NCmZ1bmN0aW9uIEdyb3VwLkVudW1lcmF0ZSguLi4pDQpJUkxVQV9QTFVHSU5fQ2hlY2tOdW1BcmdzKGFyZywxKQ0KbG9jYWwgc0dyb3VwTmFtZSA9IElSTFVBX1BMVUdJTl9DaGVja1R5cGVzKGFyZywxLHsic3RyaW5nIn0pOw0KLS08PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8DQppZiBHcm91cC5Eb2VzRXhpc3Qoc0dyb3VwTmFtZSkgdGhlbg0KCQ0KCWlmIFRhYmxlLkNvdW50KF9HUk9VUFNbc0dyb3VwTmFtZV0pID4gMCB0aGVuDQoJcmV0dXJuIF9HUk9VUFNbc0dyb3VwTmFtZV0NCgllbHNlDQoJcmV0dXJuIG5pbA0KCWVuZA0KCQ0KZWxzZQ0KcmV0dXJuIC0yDQplbmQNCmVuZA0KDQoNCg0KLS09PT09PT09PT09PT09PT09PT09PT09PT09ISEhDQotLSBHcm91cC5HZXRFbmFibGVkDQotLT09PT09PT09PT09PT09PT09PT09PT09PT0NCmZ1bmN0aW9uIEdyb3VwLkdldEVuYWJsZWQoLi4uKQ0KSVJMVUFfUExVR0lOX0NoZWNrTnVtQXJncyhhcmcsMSkNCmxvY2FsIHNHcm91cE5hbWUgPSBJUkxVQV9QTFVHSU5fQ2hlY2tUeXBlcyhhcmcsMSx7InN0cmluZyJ9KTsNCi0tPDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PAkNCmlmIEdyb3VwLkRvZXNFeGlzdChzR3JvdXBOYW1lKSB0aGVuDQpsb2NhbCBuVHJ1ZSA9IDA7DQpsb2NhbCBuRmFsc2UgPSAwOw0KCQ0KCWlmIFRhYmxlLkNvdW50KF9HUk9VUFNbc0dyb3VwTmFtZV0pID4gMCB0aGVuDQoJDQoJCWZvciBzT2JqZWN0LCB0QXR0IGluIHBhaXJzKF9HUk9VUFNbc0dyb3VwTmFtZV0pIGRvDQoJCWxvY2FsIG5UeXBlID0gR2V0T2JqZWN0VHlwZShzT2JqZWN0KTsNCgkJbG9jYWwgZkFjdGlvbiA9IHRUeXBlc1tuVHlwZV07DQoJCWxvY2FsIGJFbmFibGVkID0gZkFjdGlvbi5Jc0VuYWJsZWQoc09iamVjdCk7DQoJCQkJCQ0KCQkJaWYgYkVuYWJsZWQgdGhlbg0KCQkJblRydWUgPSBuVHJ1ZSArIDE7DQoJCQllbHNlaWYgbm90IGJFbmFibGVkIHRoZW4NCgkJCW5GYWxzZSA9IG5GYWxzZSArIDE7CQkJDQoJCQllbmQJCQkJCQ0KCQkNCgkJCWlmIG5UcnVlID4gMCBhbmQgbkZhbHNlID4gMCB0aGVuDQoJCQlyZXR1cm4gbmlsDQoJCQllbmQNCgkJDQoJCWVuZA0KCQkNCgkJaWYgblRydWUgPiAwIHRoZW4NCgkJcmV0dXJuIHRydWUNCgkJZWxzZWlmIG5GYWxzZSA+IDAgdGhlbg0KCQlyZXR1cm4gZmFsc2UNCgkJZW5kDQoJCQ0KCWVsc2UNCglyZXR1cm4gbmlsDQoJZW5kDQoNCmVsc2UNCnJldHVybiAtMg0KZW5kDQplbmQNCg0KDQoNCi0tPT09PT09PT09PT09PT09PT09PT09PT09PSEhIQ0KLS0gR3JvdXAuR2V0R3JvdXBOYW1lcw0KLS09PT09PT09PT09PT09PT09PT09PT09PT09DQpmdW5jdGlvbiBHcm91cC5HZXRHcm91cE5hbWVzKCkNCmxvY2FsIHRHcm91cHMgPSB7fTsNCg0KaWYgVGFibGUuQ291bnQoX0dST1VQUykgPiAwIHRoZW4NCg0KCWZvciBzR3JvdXAsIHRBdHQgaW4gcGFpcnMoX0dST1VQUykgZG8NCgl0R3JvdXBzW1RhYmxlLkNvdW50KHRHcm91cHMpICsgMV0gPSBzR3JvdXA7DQoJZW5kDQoNClRhYmxlLlNvcnQodEdyb3VwcywgbmlsKTsNCnJldHVybiB0R3JvdXBzDQplbHNlDQpyZXR1cm4gbmlsDQplbmQNCmVuZA0KDQoNCg0KLS09PT09PT09PT09PT09PT09PT09PT09PT09ISEhDQotLSBHcm91cC5HZXRPYmplY3RzDQotLT09PT09PT09PT09PT09PT09PT09PT09PT0NCmZ1bmN0aW9uIEdyb3VwLkdldE9iamVjdHMoLi4uKQ0KSVJMVUFfUExVR0lOX0NoZWNrTnVtQXJncyhhcmcsMSkNCmxvY2FsIHNHcm91cE5hbWUgPSBJUkxVQV9QTFVHSU5fQ2hlY2tUeXBlcyhhcmcsMSx7InN0cmluZyJ9KTsNCi0tPDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PA0KaWYgR3JvdXAuRG9lc0V4aXN0KHNHcm91cE5hbWUpIHRoZW4NCg0KCWlmIFRhYmxlLkNvdW50KF9HUk9VUFNbc0dyb3VwTmFtZV0pID4gMCB0aGVuDQoJbG9jYWwgdFJldCA9IHt9Ow0KCQ0KCQlmb3Igc09iamVjdCwgdEF0dCBpbiBwYWlycyhfR1JPVVBTW3NHcm91cE5hbWVdKSBkbw0KCQlsb2NhbCBmQWN0aW9uID0gdFR5cGVzW3RBdHQuVHlwZV07DQoJCWxvY2FsIG5JbmRleCA9IFRhYmxlLkNvdW50KHRSZXQpICsgMTsNCgkJdFJldFtuSW5kZXhdID0ge307DQoJCXRSZXRbbkluZGV4XS5PYmplY3QgPSBzT2JqZWN0Ow0KCQl0UmV0W25JbmRleF0uVHlwZSA9IHRBdHQuVHlwZTsNCgkJdFJldFtuSW5kZXhdLlByb3BlcnRpZXMgPSBmQWN0aW9uLkdldFByb3BlcnRpZXMoc09iamVjdCk7DQoJCWVuZA0KCQ0KCXJldHVybiB0UmV0DQoJZWxzZQ0KCXJldHVybiBuaWwNCgllbmQNCgkNCmVsc2UNCnJldHVybiAtMg0KZW5kDQplbmQNCg0KDQoNCi0tPT09PT09PT09PT09PT09PT09PT09PT09PSEhIQ0KLS0gR3JvdXAuR2V0UmVjdFBvcw0KLS09PT09PT09PT09PT09PT09PT09PT09PT09DQpmdW5jdGlvbiBHcm91cC5HZXRSZWN0UG9zKC4uLikNCklSTFVBX1BMVUdJTl9DaGVja051bUFyZ3MoYXJnLDEpDQpsb2NhbCBzR3JvdXBOYW1lID0gSVJMVUFfUExVR0lOX0NoZWNrVHlwZXMoYXJnLDEseyJzdHJpbmcifSk7DQotLTw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDwNCmlmIEdyb3VwLkRvZXNFeGlzdChzR3JvdXBOYW1lKSB0aGVuDQoNCglpZiBUYWJsZS5Db3VudChfR1JPVVBTW3NHcm91cE5hbWVdKSA+IDAgdGhlbg0KCWxvY2FsIG5MZWZ0TW9zdCA9IDk5OTk5OTsNCglsb2NhbCBuVG9wTW9zdCA9IDk5OTk5OTsNCglsb2NhbCB0UmV0ID0ge307DQoJDQoJCWZvciBzR3JvdXAsIHRBdHQgaW4gcGFpcnMoX0dST1VQU1tzR3JvdXBOYW1lXSkgZG8NCgkJCQ0KCQkJaWYgdEF0dC5YIDwgbkxlZnRNb3N0IHRoZW4NCgkJCW5MZWZ0TW9zdCA9IHRBdHQuWDsNCgkJCWVuZA0KCQkJDQoJCQlpZiB0QXR0LlkgPCBuVG9wTW9zdCB0aGVuDQoJCQluVG9wTW9zdCA9IHRBdHQuWTsNCgkJCWVuZA0KCQkJCQkJDQoJCWVuZA0KCQ0KCXRSZXQuWCA9IG5MZWZ0TW9zdDsNCgl0UmV0LlkgPSBuVG9wTW9zdDsNCglyZXR1cm4gdFJldA0KCWVsc2UNCglyZXR1cm4gbmlsDQoJZW5kDQoNCmVsc2UNCnJldHVybiAtMg0KZW5kDQplbmQNCg0KDQoNCi0tPT09PT09PT09PT09PT09PT09PT09PT09PSEhIQ0KLS0gR3JvdXAuR2V0UmVjdFNpemUNCi0tPT09PT09PT09PT09PT09PT09PT09PT09PQ0KZnVuY3Rpb24gR3JvdXAuR2V0UmVjdFNpemUoLi4uKQ0KSVJMVUFfUExVR0lOX0NoZWNrTnVtQXJncyhhcmcsMSkNCmxvY2FsIHNHcm91cE5hbWUgPSBJUkxVQV9QTFVHSU5fQ2hlY2tUeXBlcyhhcmcsMSx7InN0cmluZyJ9KTsNCi0tPDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PA0KaWYgR3JvdXAuRG9lc0V4aXN0KHNHcm91cE5hbWUpIHRoZW4NCg0KCWlmIFRhYmxlLkNvdW50KF9HUk9VUFNbc0dyb3VwTmFtZV0pID4gMCB0aGVuDQoJbG9jYWwgbkxlZnRNb3N0ID0gOTk5OTk5Ow0KCWxvY2FsIG5SaWdodE1vc3QgPSAtOTk5OTk5Ow0KCWxvY2FsIG5Ub3BNb3N0ID0gOTk5OTk5Ow0KCWxvY2FsIG5Cb3R0b21Nb3N0ID0gLTk5OTk5OTsNCglsb2NhbCB0UmV0ID0ge307DQoJDQoJCWZvciBzR3JvdXAsIHRBdHQgaW4gcGFpcnMoX0dST1VQU1tzR3JvdXBOYW1lXSkgZG8NCgkJCQ0KCQkJaWYgdEF0dC5YIDwgbkxlZnRNb3N0IHRoZW4NCgkJCW5MZWZ0TW9zdCA9IHRBdHQuWDsNCgkJCWVuZA0KCQkJDQoJCQlsb2NhbCBuUmlnaHRFZGdlID0gKHRBdHQuWCArIHRBdHQuV2lkdGgpOw0KCQkJaWYgblJpZ2h0RWRnZSA+IG5SaWdodE1vc3QgdGhlbg0KCQkJblJpZ2h0TW9zdCA9IG5SaWdodEVkZ2U7DQoJCQllbmQNCgkJCQ0KCQkJaWYgdEF0dC5ZIDwgblRvcE1vc3QgdGhlbg0KCQkJblRvcE1vc3QgPSB0QXR0Llk7DQoJCQllbmQNCgkJCQ0KCQkJbG9jYWwgbkJvdHRvbUVkZ2UgPSAodEF0dC5ZICsgdEF0dC5IZWlnaHQpOw0KCQkJaWYgbkJvdHRvbUVkZ2UgPiBuQm90dG9tTW9zdCB0aGVuDQoJCQluQm90dG9tTW9zdCA9IG5Cb3R0b21FZGdlOw0KCQkJZW5kDQoJCQkJCQkJCQkNCgkJZW5kDQoJDQoJdFJldC5XaWR0aCA9IChuUmlnaHRNb3N0IC0gbkxlZnRNb3N0KTsNCgl0UmV0LkhlaWdodCA9IChuQm90dG9tTW9zdCAtIG5Ub3BNb3N0KTsNCglyZXR1cm4gdFJldA0KCWVsc2UNCglyZXR1cm4gbmlsDQoJZW5kDQoNCmVsc2UNCnJldHVybiAtMg0KZW5kDQplbmQNCg0KDQoNCi0tPT09PT09PT09PT09PT09PT09PT09PT09PSEhIQ0KLS0gR3JvdXAuR2V0VmlzaWJsZQ0KLS09PT09PT09PT09PT09PT09PT09PT09PT09DQpmdW5jdGlvbiBHcm91cC5HZXRWaXNpYmxlKC4uLikNCklSTFVBX1BMVUdJTl9DaGVja051bUFyZ3MoYXJnLDEpDQpsb2NhbCBzR3JvdXBOYW1lID0gSVJMVUFfUExVR0lOX0NoZWNrVHlwZXMoYXJnLDEseyJzdHJpbmcifSk7DQotLTw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDwNCmlmIEdyb3VwLkRvZXNFeGlzdChzR3JvdXBOYW1lKSB0aGVuDQpsb2NhbCBuVHJ1ZSA9IDA7DQpsb2NhbCBuRmFsc2UgPSAwOw0KCQ0KCWlmIFRhYmxlLkNvdW50KF9HUk9VUFNbc0dyb3VwTmFtZV0pID4gMCB0aGVuDQoJDQoJCWZvciBzT2JqZWN0LCB0QXR0IGluIHBhaXJzKF9HUk9VUFNbc0dyb3VwTmFtZV0pIGRvDQoJCWxvY2FsIG5UeXBlID0gR2V0T2JqZWN0VHlwZShzT2JqZWN0KTsNCgkJbG9jYWwgZkFjdGlvbiA9IHRUeXBlc1tuVHlwZV07DQoJCWxvY2FsIGJFbmFibGVkID0gZkFjdGlvbi5Jc1Zpc2libGUoc09iamVjdCk7DQoJCQkJCQ0KCQkJaWYgYkVuYWJsZWQgdGhlbg0KCQkJblRydWUgPSBuVHJ1ZSArIDE7DQoJCQllbHNlaWYgbm90IGJFbmFibGVkIHRoZW4NCgkJCW5GYWxzZSA9IG5GYWxzZSArIDE7CQkJDQoJCQllbmQJCQkJCQ0KCQkNCgkJCWlmIG5UcnVlID4gMCBhbmQgbkZhbHNlID4gMCB0aGVuDQoJCQlyZXR1cm4gbmlsDQoJCQllbmQNCgkJDQoJCWVuZA0KCQkNCgkJaWYgblRydWUgPiAwIHRoZW4NCgkJcmV0dXJuIHRydWUNCgkJZWxzZWlmIG5GYWxzZSA+IDAgdGhlbg0KCQlyZXR1cm4gZmFsc2UNCgkJZW5kDQoJCQ0KCWVsc2UNCglyZXR1cm4gbmlsDQoJZW5kDQoNCmVsc2UNCnJldHVybiAtMg0KZW5kDQplbmQNCg0KDQoNCi0tPT09PT09PT09PT09PT09PT09PT09PT09PT09ISEhDQotLSBHcm91cC5Mb2FkU2V0dGluZ3MNCi0tPT09PT09PT09PT09PT09PT09PT09PT09PT09DQpmdW5jdGlvbiBHcm91cC5Mb2FkU2V0dGluZ3MoLi4uKQ0KSVJMVUFfUExVR0lOX0NoZWNrTnVtQXJncyhhcmcsMik7DQpsb2NhbCBzR3JvdXBOYW1lID0gSVJMVUFfUExVR0lOX0NoZWNrVHlwZXMoYXJnLDEseyJzdHJpbmcifSk7DQpsb2NhbCBzRmlsZSA9IElSTFVBX1BMVUdJTl9DaGVja1R5cGVzKGFyZywyLHsic3RyaW5nIn0pOw0KX0dST1VQX1RFTVBbIk9iamVjdHMiXSA9IHt9Ow0KLS08PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8DQppZiBHcm91cC5Eb2VzRXhpc3Qoc0dyb3VwTmFtZSkgdGhlbg0KDQoJaWYgRmlsZS5Eb2VzRXhpc3Qoc0ZpbGUpIHRoZW4NCglsb2NhbCB0VmFsdWVzID0gSU5JRmlsZS5HZXRWYWx1ZU5hbWVzKHNGaWxlLCBzR3JvdXBOYW1lKTsNCgkJDQoJCWlmIHRWYWx1ZXMgdGhlbg0KCQlfR1JPVVBTW3NHcm91cE5hbWVdID0gbmlsOw0KCQktLT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQ0KCQlsb2NhbCBmdW5jdGlvbiBQYXJzZVZhbHVlKHNWYWx1ZSkNCgkJbG9jYWwgblN0YXJ0ID0gU3RyaW5nLkZpbmQoc1ZhbHVlLCAiXyFfIV8hXyIsIDEsIGZhbHNlKTsNCgkJbG9jYWwgc09iamVjdCA9IFN0cmluZy5MZWZ0KHNWYWx1ZSwgKG5TdGFydCAtIDEpKTsNCgkJbG9jYWwgc0F0dCA9IFN0cmluZy5SaWdodChzVmFsdWUsIChTdHJpbmcuTGVuZ3RoKHNWYWx1ZSkgLShTdHJpbmcuTGVuZ3RoKHNPYmplY3QpICsgNykpKTsNCgkJcmV0dXJuIHNPYmplY3QsIHNBdHQJCSANCgkJZW5kDQoJCS0tPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQ0KCQkNCgkJCQ0KCQkJZm9yIG5JbmRleCwgc1ZhbHVlIGluIHBhaXJzKHRWYWx1ZXMpIGRvDQoJCQlsb2NhbCBEYXRhID0gSU5JRmlsZS5HZXRWYWx1ZShzRmlsZSwgc0dyb3VwTmFtZSwgc1ZhbHVlKTsNCgkJCWxvY2FsIHNPYmplY3Qsc0F0dCA9IFBhcnNlVmFsdWUoc1ZhbHVlKTsNCgkJCQkNCgkJCQlpZiBub3QgX0dST1VQX1RFTVBbIk9iamVjdHMiXVtzT2JqZWN0XSB0aGVuDQoJCQkJbG9jYWwgc0xvYWQgPSAiX0dST1VQX1RFTVBbXCJPYmplY3RzXCJdW1wiIi4uc09iamVjdC4uIlwiXSA9IHt9OyI7DQoJCQkJbG9hZHN0cmluZyhzTG9hZCkoKTsNCgkJCQllbmQNCgkJCQkJCQ0KCQkJbG9jYWwgc0xvYWQgPSAiX0dST1VQX1RFTVBbXCJPYmplY3RzXCJdW1wiIi4uc09iamVjdC4uIlwiXS4iLi5zQXR0Li4iID0gIi4uRGF0YS4uIjsiOw0KCQkJbG9hZHN0cmluZyhzTG9hZCkoKTsNCgkJCWVuZAkNCgkJCQ0KCQkJVHJhbnNmZXJUYWJsZURhdGEoX0dST1VQX1RFTVAsICJPYmplY3RzIiwgX0dST1VQUywgc0dyb3VwTmFtZSk7DQoJCQkNCgkJCWZvciBzT2JqZWN0LCB0QXR0IGluIHBhaXJzKF9HUk9VUFNbc0dyb3VwTmFtZV0pIGRvDQoJCQkJDQoJCQkJaWYgR3JvdXAuT2JqZWN0RG9lc0V4aXN0KHNPYmplY3QpIHRoZW4NCgkJCQlsb2NhbCBmQWN0aW9uID0gdFR5cGVzW3RBdHQuVHlwZV07DQoJCQkJZkFjdGlvbi5TZXRTaXplKHNPYmplY3QsdEF0dC5XaWR0aCx0QXR0LkhlaWdodCk7DQoJCQkJZkFjdGlvbi5TZXRQb3Moc09iamVjdCwgdEF0dC5YLCB0QXR0LlkpOw0KCQkJCWZBY3Rpb24uU2V0VmlzaWJsZShzT2JqZWN0LHRBdHQuSXNWaXNpYmxlKTsNCgkJCQlmQWN0aW9uLlNldEVuYWJsZWQoc09iamVjdCx0QXR0LklzRW5hYmxlZCk7DQoJCQkJZW5kDQoJCQ0KCQkJZW5kDQoJCQ0KCQlyZXR1cm4gMAkNCgkJZWxzZQ0KCQlyZXR1cm4gLTQNCgkJZW5kCQ0KCQ0KCWVsc2UNCglyZXR1cm4gLTMNCgllbmQNCg0KZWxzZQ0KcmV0dXJuIC0yDQplbmQNCmVuZA0KDQoNCg0KLS09PT09PT09PT09PT09PT09PT09PT09PT09PT0hISENCi0tIEdyb3VwLk1lcmdlDQotLT09PT09PT09PT09PT09PT09PT09PT09PT09PQ0KZnVuY3Rpb24gR3JvdXAuTWVyZ2UoLi4uKQ0KSVJMVUFfUExVR0lOX0NoZWNrTnVtQXJncyhhcmcsMik7DQpsb2NhbCBzR3JvdXBOYW1lXzEgPSBJUkxVQV9QTFVHSU5fQ2hlY2tUeXBlcyhhcmcsMSx7InN0cmluZyJ9KTsNCmxvY2FsIHNHcm91cE5hbWVfMiA9IElSTFVBX1BMVUdJTl9DaGVja1R5cGVzKGFyZywyLHsic3RyaW5nIn0pOw0KLS08PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8DQppZiBHcm91cC5Eb2VzRXhpc3Qoc0dyb3VwTmFtZV8xKSBhbmQgR3JvdXAuRG9lc0V4aXN0KHNHcm91cE5hbWVfMikgdGhlbg0KCQ0KCWlmIFRhYmxlLkNvdW50KF9HUk9VUFNbc0dyb3VwTmFtZV8yXSkgPiAwIHRoZW4gDQoJVHJhbnNmZXJUYWJsZURhdGEoX0dST1VQUywgc0dyb3VwTmFtZV8yLCBfR1JPVVBTLCBzR3JvdXBOYW1lXzEsIHRydWUpOw0KCV9HUk9VUFNbc0dyb3VwTmFtZV8yXSA9IG5pbDsNCglyZXR1cm4gMA0KCWVsc2UNCglyZXR1cm4gMQ0KCWVuZA0KDQplbHNlDQpyZXR1cm4gLTINCmVuZA0KZW5kDQoNCg0KDQotLT09PT09PT09PT09PT09PT09PT09PT09PT09PSEhIQ0KLS0gR3JvdXAuT2JqZWN0RG9lc0V4aXN0DQotLT09PT09PT09PT09PT09PT09PT09PT09PT09PQ0KZnVuY3Rpb24gR3JvdXAuT2JqZWN0RG9lc0V4aXN0KC4uLikNCklSTFVBX1BMVUdJTl9DaGVja051bUFyZ3MoYXJnLDEpOw0KbG9jYWwgc1NlYXJjaE9iamVjdCA9IElSTFVBX1BMVUdJTl9DaGVja1R5cGVzKGFyZywxLHsic3RyaW5nIn0pOw0KLS08PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8DQpsb2NhbCBiUmV0ID0gZmFsc2U7DQpsb2NhbCB0QWxsT2JqZWN0cyA9IHt9Ow0KDQppZiBBcHBsaWNhdGlvbi5HZXRDdXJyZW50RGlhbG9nKCkgPT0gIiIgdGhlbg0KdEFsbE9iamVjdHMgPSBQYWdlLkVudW1lcmF0ZU9iamVjdHMoKTsNCg0KCWlmIHRBbGxPYmplY3RzIHRoZW4NCgkNCgkJZm9yIG5JbmRleCwgc09iamVjdCBpbiBwYWlycyh0QWxsT2JqZWN0cykgZG8NCgkJCQ0KCQkJaWYgc09iamVjdCA9PSBzU2VhcmNoT2JqZWN0IHRoZW4NCgkJCWJSZXQgPSB0cnVlOw0KCQkJYnJlYWs7DQoJCQllbmQJDQoJCQ0KCQllbmQNCgkNCgllbmQNCg0KZWxzZWlmIEFwcGxpY2F0aW9uLkdldEN1cnJlbnRQYWdlKCkgPT0gIiIgdGhlbg0KdEFsbE9iamVjdHMgPSBEaWFsb2dFeC5FbnVtZXJhdGVPYmplY3RzKCk7DQoNCglpZiB0QWxsT2JqZWN0cyB0aGVuDQoJDQoJCWZvciBuSW5kZXgsIHNPYmplY3QgaW4gcGFpcnModEFsbE9iamVjdHMpIGRvDQoJCQkNCgkJCWlmIHNPYmplY3QgPT0gc1NlYXJjaE9iamVjdCB0aGVuDQoJCQliUmV0ID0gdHJ1ZTsNCgkJCWJyZWFrOw0KCQkJZW5kCQ0KCQkNCgkJZW5kDQoJDQoJZW5kDQoNCmVuZA0KDQpyZXR1cm4gYlJldA0KZW5kDQoNCg0KDQotLT09PT09PT09PT09PT09PT09PT09PT09PT0hISENCi0tIEdyb3VwLk9iamVjdElzSW5Hcm91cA0KLS09PT09PT09PT09PT09PT09PT09PT09PT09DQpmdW5jdGlvbiBHcm91cC5PYmplY3RJc0luR3JvdXAoLi4uKQ0KSVJMVUFfUExVR0lOX0NoZWNrTnVtQXJncyhhcmcsMikNCmxvY2FsIHNHcm91cE5hbWUgPSBJUkxVQV9QTFVHSU5fQ2hlY2tUeXBlcyhhcmcsMSx7InN0cmluZyJ9KQ0KbG9jYWwgc09iamVjdE5hbWUgPSBJUkxVQV9QTFVHSU5fQ2hlY2tUeXBlcyhhcmcsMix7InN0cmluZyJ9KQ0KLS08PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8CQ0KaWYgR3JvdXAuRG9lc0V4aXN0KHNHcm91cE5hbWUpIHRoZW4NCg0KCWlmIF9HUk9VUFNbc0dyb3VwTmFtZV1bc09iamVjdE5hbWVdIHRoZW4NCglyZXR1cm4gdHJ1ZQ0KCWVsc2UNCglyZXR1cm4gZmFsc2UNCgllbmQNCgkNCmVsc2UNCnJldHVybiAtMg0KZW5kDQplbmQNCg0KDQoNCi0tPT09PT09PT09PT09PT09PT09PT09PT09PSEhIQ0KLS0gR3JvdXAuUmVjYWxsU2V0dGluZ3MNCi0tPT09PT09PT09PT09PT09PT09PT09PT09PQ0KZnVuY3Rpb24gR3JvdXAuUmVjYWxsU2V0dGluZ3MoLi4uKQ0KSVJMVUFfUExVR0lOX0NoZWNrTnVtQXJncyhhcmcsMikNCmxvY2FsIHNHcm91cE5hbWUgPSBJUkxVQV9QTFVHSU5fQ2hlY2tUeXBlcyhhcmcsMSx7InN0cmluZyJ9KTsNCmxvY2FsIHNLZXkgPSBJUkxVQV9QTFVHSU5fQ2hlY2tUeXBlcyhhcmcsMix7InN0cmluZyJ9KTsNCi0tPDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PA0KaWYgR3JvdXAuRG9lc0V4aXN0KHNHcm91cE5hbWUpIHRoZW4NCg0KCWlmIF9HUk9VUF9CQU5LW3NLZXldIHRoZW4NCglBcHBsaWNhdGlvbi5TZXRSZWRyYXcoZmFsc2UpOw0KCVRyYW5zZmVyVGFibGVEYXRhKF9HUk9VUF9CQU5LLCBzS2V5LCBfR1JPVVBTLCBzR3JvdXBOYW1lKTsNCgkNCgkJZm9yIHNPYmplY3QsIHRBdHQgaW4gcGFpcnMoX0dST1VQU1tzR3JvdXBOYW1lXSkgZG8NCgkJCQ0KCQkJaWYgR3JvdXAuT2JqZWN0RG9lc0V4aXN0KHNPYmplY3QpIHRoZW4NCgkJCWxvY2FsIGZBY3Rpb24gPSB0VHlwZXNbdEF0dC5UeXBlXTsNCgkJCWZBY3Rpb24uU2V0U2l6ZShzT2JqZWN0LHRBdHQuV2lkdGgsdEF0dC5IZWlnaHQpOw0KCQkJZkFjdGlvbi5TZXRQb3Moc09iamVjdCwgdEF0dC5YLCB0QXR0LlkpOw0KCQkJZkFjdGlvbi5TZXRWaXNpYmxlKHNPYmplY3QsdEF0dC5Jc1Zpc2libGUpOw0KCQkJZkFjdGlvbi5TZXRFbmFibGVkKHNPYmplY3QsdEF0dC5Jc0VuYWJsZWQpOw0KCQkJZW5kDQoJCQkNCgkJZW5kDQoJCQ0KCUFwcGxpY2F0aW9uLlNldFJlZHJhdyh0cnVlKTsJDQoJcmV0dXJuIDANCgllbHNlDQoJcmV0dXJuIC0xDQoJZW5kDQoJDQplbHNlDQpyZXR1cm4gLTINCmVuZA0KZW5kDQoNCg0KDQotLT09PT09PT09PT09PT09PT09PT09PT09PT09PSEhIQ0KLS0gR3JvdXAuUmVtb3ZlDQotLT09PT09PT09PT09PT09PT09PT09PT09PT09PQ0KZnVuY3Rpb24gR3JvdXAuUmVtb3ZlKC4uLikNCklSTFVBX1BMVUdJTl9DaGVja051bUFyZ3MoYXJnLDEpOw0KbG9jYWwgc0dyb3VwTmFtZSA9IElSTFVBX1BMVUdJTl9DaGVja1R5cGVzKGFyZywxLHsic3RyaW5nIn0pOw0KLS08PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8DQppZiBHcm91cC5Eb2VzRXhpc3Qoc0dyb3VwTmFtZSkgdGhlbg0KX0dST1VQU1tzR3JvdXBOYW1lXSA9IG5pbDsNCnJldHVybiAwDQplbHNlDQpyZXR1cm4gLTINCmVuZA0KZW5kDQoNCg0KDQotLT09PT09PT09PT09PT09PT09PT09PT09PT0hISENCi0tIEdyb3VwLlJlbW92ZU9iamVjdA0KLS09PT09PT09PT09PT09PT09PT09PT09PT09DQpmdW5jdGlvbiBHcm91cC5SZW1vdmVPYmplY3QoLi4uKQ0KSVJMVUFfUExVR0lOX0NoZWNrTnVtQXJncyhhcmcsMykNCmxvY2FsIHNHcm91cE5hbWUgPSBJUkxVQV9QTFVHSU5fQ2hlY2tUeXBlcyhhcmcsMSx7InN0cmluZyJ9KQ0KbG9jYWwgc09iamVjdE5hbWUgPSBJUkxVQV9QTFVHSU5fQ2hlY2tUeXBlcyhhcmcsMix7InN0cmluZyJ9KQ0KbG9jYWwgYlJlbW92ZUdyb3VwID0gSVJMVUFfUExVR0lOX0NoZWNrVHlwZXMoYXJnLDMseyJib29sZWFuIn0pDQotLTw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDwJDQppZiBHcm91cC5Eb2VzRXhpc3Qoc0dyb3VwTmFtZSkgdGhlbg0KDQoJaWYgX0dST1VQU1tzR3JvdXBOYW1lXVtzT2JqZWN0TmFtZV0gdGhlbg0KCV9HUk9VUFNbc0dyb3VwTmFtZV1bc09iamVjdE5hbWVdID0gbmlsOw0KCWVsc2UNCglyZXR1cm4gLTENCgllbmQNCgkNCglpZiBiUmVtb3ZlR3JvdXAgYW5kIFRhYmxlLkNvdW50KF9HUk9VUFNbc0dyb3VwTmFtZV0pID09IDAgdGhlbg0KCV9HUk9VUFNbc0dyb3VwTmFtZV0gPSBuaWw7DQoJcmV0dXJuIDENCgllbHNlDQoJcmV0dXJuIDANCgllbmQNCgkJDQplbHNlDQpyZXR1cm4gLTINCmVuZA0KZW5kDQoNCg0KDQotLT09PT09PT09PT09PT09PT09PT09PT09PT0hISENCi0tIEdyb3VwLlJlbmFtZQ0KLS09PT09PT09PT09PT09PT09PT09PT09PT09DQpmdW5jdGlvbiBHcm91cC5SZW5hbWUoLi4uKQ0KSVJMVUFfUExVR0lOX0NoZWNrTnVtQXJncyhhcmcsMikNCmxvY2FsIHNHcm91cE5hbWUgPSBJUkxVQV9QTFVHSU5fQ2hlY2tUeXBlcyhhcmcsMSx7InN0cmluZyJ9KTsNCmxvY2FsIHNOZXdOYW1lID0gSVJMVUFfUExVR0lOX0NoZWNrVHlwZXMoYXJnLDIseyJzdHJpbmcifSk7DQotLTw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDwNCmlmIEdyb3VwLkRvZXNFeGlzdChzR3JvdXBOYW1lKSB0aGVuDQoJDQoJaWYgbm90IF9HUk9VUFNbc05ld05hbWVdIHRoZW4NCgkJDQoJCWlmIFN0cmluZy5SZXBsYWNlKHNOZXdOYW1lLCAiICIsICIiLCBmYWxzZSkgfj0gIiIgdGhlbg0KCQlUcmFuc2ZlclRhYmxlRGF0YShfR1JPVVBTLCBzR3JvdXBOYW1lLCBfR1JPVVBTLCBzTmV3TmFtZSk7DQoJCV9HUk9VUFNbc0dyb3VwTmFtZV0gPSBuaWw7DQoJCXJldHVybiAwDQoJCWVsc2UNCgkJcmV0dXJuIC0xDQoJCWVuZA0KCQ0KCWVsc2UNCglyZXR1cm4gLTMNCgllbmQNCgkJDQplbHNlDQpyZXR1cm4gLTINCmVuZA0KZW5kDQoNCg0KDQotLT09PT09PT09PT09PT09PT09PT09PT09PT0hISENCi0tIEdyb3VwLlNhdmVTZXR0aW5ncw0KLS09PT09PT09PT09PT09PT09PT09PT09PT09DQpmdW5jdGlvbiBHcm91cC5TYXZlU2V0dGluZ3MoLi4uKQ0KSVJMVUFfUExVR0lOX0NoZWNrTnVtQXJncyhhcmcsMikNCmxvY2FsIHNHcm91cE5hbWUgPSBJUkxVQV9QTFVHSU5fQ2hlY2tUeXBlcyhhcmcsMSx7InN0cmluZyJ9KTsNCmxvY2FsIHNGaWxlID0gSVJMVUFfUExVR0lOX0NoZWNrVHlwZXMoYXJnLDIseyJzdHJpbmcifSk7DQotLTw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDwJDQppZiBHcm91cC5Eb2VzRXhpc3Qoc0dyb3VwTmFtZSkgdGhlbg0KCQ0KCWlmIFRhYmxlLkNvdW50KF9HUk9VUFNbc0dyb3VwTmFtZV0pID4gMCB0aGVuDQoJLS09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0NCglsb2NhbCBmdW5jdGlvbiBTYXZlKE9iamVjdCwgQXR0LCBWYWx1ZSkNCglJTklGaWxlLlNldFZhbHVlKHNGaWxlLCBzR3JvdXBOYW1lLCBPYmplY3QuLiJfIV8hXyFfIi4uQXR0LCBWYWx1ZSk7DQoJZW5kDQoJLS09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0NCgkNCgkJaWYgbm90IEZpbGUuRG9lc0V4aXN0KHNGaWxlKSB0aGVuDQoJCVRleHRGaWxlLldyaXRlRnJvbVN0cmluZyhzRmlsZSwgIiIsIGZhbHNlKTsNCgkJbG9jYWwgbkVycm9yID0gQXBwbGljYXRpb24uR2V0TGFzdEVycm9yKCk7DQoJCQkNCgkJCWlmIG5FcnJvciB+PSAwIHRoZW4NCgkJCXJldHVybiBuRXJyb3INCgkJCWVuZA0KCQkJDQoJCWVuZA0KCQkNCgkJSU5JRmlsZS5EZWxldGVTZWN0aW9uKHNGaWxlLCBzR3JvdXBOYW1lKTsNCgkJDQoJCWZvciBzT2JqZWN0LCB0QXR0IGluIHBhaXJzKF9HUk9VUFNbc0dyb3VwTmFtZV0pIGRvDQoJCVNhdmUoc09iamVjdCwgIlgiLCBDT05WRVJUKHRBdHQuWCwgInN0cmluZyIpKTsNCgkJU2F2ZShzT2JqZWN0LCAiWSIsIENPTlZFUlQodEF0dC5ZLCAic3RyaW5nIikpOw0KCQlTYXZlKHNPYmplY3QsICJXaWR0aCIsIENPTlZFUlQodEF0dC5XaWR0aCwgInN0cmluZyIpKTsNCgkJU2F2ZShzT2JqZWN0LCAiSGVpZ2h0IiwgQ09OVkVSVCh0QXR0LkhlaWdodCwgInN0cmluZyIpKTsNCgkJU2F2ZShzT2JqZWN0LCAiSXNFbmFibGVkIiwgQ09OVkVSVCh0QXR0LklzRW5hYmxlZCwgInN0cmluZyIpKTsNCgkJU2F2ZShzT2JqZWN0LCAiSXNWaXNpYmxlIiwgQ09OVkVSVCh0QXR0LklzVmlzaWJsZSwgInN0cmluZyIpKTsNCgkJU2F2ZShzT2JqZWN0LCAiVHlwZSIsIENPTlZFUlQodEF0dC5UeXBlLCAic3RyaW5nIikpOw0KCQllbmQNCgkNCgkJbG9jYWwgdFNlY3Rpb25zID0gSU5JRmlsZS5HZXRTZWN0aW9uTmFtZXMoc0ZpbGUpOw0KCQlmb3IgbkluZGV4LCBzU2VjdGlvbiBpbiBwYWlycyh0U2VjdGlvbnMpIGRvDQoJCQkNCgkJCWxvY2FsIHRWYWx1ZXMgPSBJTklGaWxlLkdldFZhbHVlTmFtZXMoc0ZpbGUsIHNTZWN0aW9uKTsNCgkJCWlmIG5vdCB0VmFsdWVzIHRoZW4NCgkJCUlOSUZpbGUuRGVsZXRlU2VjdGlvbihzRmlsZSwgc1NlY3Rpb24pOw0KCQkJZW5kDQoJCQkNCgkJZW5kDQoJCQ0KCXJldHVybiAwCQ0KCWVsc2UNCglyZXR1cm4gLTENCgllbmQNCgkNCmVsc2UNCnJldHVybiAtMg0KZW5kDQplbmQNCg0KDQoNCi0tPT09PT09PT09PT09PT09PT09PT09PT09PSEhIQ0KLS0gR3JvdXAuU2V0RW5hYmxlZA0KLS09PT09PT09PT09PT09PT09PT09PT09PT09DQpmdW5jdGlvbiBHcm91cC5TZXRFbmFibGVkKC4uLikNCklSTFVBX1BMVUdJTl9DaGVja051bUFyZ3MoYXJnLDIpDQpsb2NhbCBzR3JvdXBOYW1lID0gSVJMVUFfUExVR0lOX0NoZWNrVHlwZXMoYXJnLDEseyJzdHJpbmcifSk7DQpsb2NhbCBiRW5hYmxlID0gSVJMVUFfUExVR0lOX0NoZWNrVHlwZXMoYXJnLDIseyJib29sZWFuIn0pOw0KLS08PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8CQ0KaWYgR3JvdXAuRG9lc0V4aXN0KHNHcm91cE5hbWUpIHRoZW4NCkFwcGxpY2F0aW9uLlNldFJlZHJhdyhmYWxzZSk7DQoNCglmb3Igc09iamVjdCwgdEF0dCBpbiBwYWlycyhfR1JPVVBTW3NHcm91cE5hbWVdKSBkbw0KCWxvY2FsIGZBY3Rpb24gPSB0VHlwZXNbdEF0dC5UeXBlXTsNCgl0QXR0LklzRW5hYmxlZCA9IGJFbmFibGU7DQoJZkFjdGlvbi5TZXRFbmFibGVkKHNPYmplY3QsIGJFbmFibGUpOw0KCWVuZA0KDQpBcHBsaWNhdGlvbi5TZXRSZWRyYXcodHJ1ZSk7DQpyZXR1cm4gMA0KZWxzZQ0KcmV0dXJuIC0yDQplbmQNCmVuZA0KDQoNCg0KLS09PT09PT09PT09PT09PT09PT09PT09PT09ISEhDQotLSBHcm91cC5TZXRQb3MNCi0tPT09PT09PT09PT09PT09PT09PT09PT09PQ0KZnVuY3Rpb24gR3JvdXAuU2V0UG9zKC4uLikNCklSTFVBX1BMVUdJTl9DaGVja051bUFyZ3MoYXJnLDEpDQpsb2NhbCBzR3JvdXBOYW1lID0gSVJMVUFfUExVR0lOX0NoZWNrVHlwZXMoYXJnLDEseyJzdHJpbmcifSk7DQpsb2NhbCBuWCA9IElSTFVBX1BMVUdJTl9DaGVja1R5cGVzKGFyZywyLHsibnVtYmVyIiwibmlsIn0pOw0KbG9jYWwgblkgPSBJUkxVQV9QTFVHSU5fQ2hlY2tUeXBlcyhhcmcsMyx7Im51bWJlciIsIm5pbCJ9KTsNCi0tPDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PA0KaWYgR3JvdXAuRG9lc0V4aXN0KHNHcm91cE5hbWUpIHRoZW4NCkFwcGxpY2F0aW9uLlNldFJlZHJhdyhmYWxzZSk7DQoJDQoJaWYgblggb3Igblkgfj0gbmlsIHRoZW4NCgkJDQoJCWlmIG5YID09IG5pbCB0aGVuDQoJCQkNCgkJCWZvciBzT2JqZWN0LCB0QXR0IGluIHBhaXJzKF9HUk9VUFNbc0dyb3VwTmFtZV0pIGRvDQoJCQlsb2NhbCBmQWN0aW9uID0gdFR5cGVzW3RBdHQuVHlwZV07DQoJCQl0QXR0LlkgPSBuWTsNCgkJCWZBY3Rpb24uU2V0UG9zKHNPYmplY3QsdEF0dC5YLHRBdHQuWSk7DQoJCQllbmQNCgkJDQoJCWVsc2VpZiBuWSA9PSBuaWwgdGhlbg0KCQkJDQoJCQlmb3Igc09iamVjdCwgdEF0dCBpbiBwYWlycyhfR1JPVVBTW3NHcm91cE5hbWVdKSBkbw0KCQkJbG9jYWwgZkFjdGlvbiA9IHRUeXBlc1t0QXR0LlR5cGVdOw0KCQkJdEF0dC5YID0gblg7DQoJCQlmQWN0aW9uLlNldFBvcyhzT2JqZWN0LHRBdHQuWCx0QXR0LlkpOw0KCQkJZW5kDQoJCQ0KCQllbHNlDQoJCQ0KCQkJZm9yIHNPYmplY3QsIHRBdHQgaW4gcGFpcnMoX0dST1VQU1tzR3JvdXBOYW1lXSkgZG8NCgkJCWxvY2FsIGZBY3Rpb24gPSB0VHlwZXNbdEF0dC5UeXBlXTsNCgkJCXRBdHQuWCA9IG5YOw0KCQkJdEF0dC5ZID0gblk7DQoJCQlmQWN0aW9uLlNldFBvcyhzT2JqZWN0LHRBdHQuWCx0QXR0LlkpOw0KCQkJZW5kDQoJCQkJDQoJCWVuZAkJCQ0KCQ0KCWVuZA0KCQ0KQXBwbGljYXRpb24uU2V0UmVkcmF3KHRydWUpOw0KcmV0dXJuIDANCmVsc2UNCnJldHVybiAtMg0KZW5kDQplbmQNCg0KDQoNCi0tPT09PT09PT09PT09PT09PT09PT09PT09PSEhIQ0KLS0gR3JvdXAuU2V0UmVjdFBvcw0KLS09PT09PT09PT09PT09PT09PT09PT09PT09DQpmdW5jdGlvbiBHcm91cC5TZXRSZWN0UG9zKC4uLikNCklSTFVBX1BMVUdJTl9DaGVja051bUFyZ3MoYXJnLDEpDQpsb2NhbCBzR3JvdXBOYW1lID0gSVJMVUFfUExVR0lOX0NoZWNrVHlwZXMoYXJnLDEseyJzdHJpbmcifSk7DQpsb2NhbCBuWCA9IElSTFVBX1BMVUdJTl9DaGVja1R5cGVzKGFyZywyLHsibnVtYmVyIiwibmlsIn0pOw0KbG9jYWwgblkgPSBJUkxVQV9QTFVHSU5fQ2hlY2tUeXBlcyhhcmcsMyx7Im51bWJlciIsIm5pbCJ9KTsNCi0tPDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PAkNCmlmIEdyb3VwLkRvZXNFeGlzdChzR3JvdXBOYW1lKSB0aGVuDQpBcHBsaWNhdGlvbi5TZXRSZWRyYXcoZmFsc2UpOw0KDQoJaWYgVGFibGUuQ291bnQoX0dST1VQU1tzR3JvdXBOYW1lXSkgPiAwIHRoZW4NCglsb2NhbCBuTGVmdE1vc3QgPSA5OTk5OTk7DQoJbG9jYWwgblRvcE1vc3QgPSA5OTk5OTk7DQoJCQ0KCQlmb3Igc0dyb3VwLCB0QXR0IGluIHBhaXJzKF9HUk9VUFNbc0dyb3VwTmFtZV0pIGRvDQoJCQkNCgkJCWlmIHRBdHQuWCA8IG5MZWZ0TW9zdCB0aGVuDQoJCQluTGVmdE1vc3QgPSB0QXR0Llg7DQoJCQllbmQNCgkJCQ0KCQkJaWYgdEF0dC5ZIDwgblRvcE1vc3QgdGhlbg0KCQkJblRvcE1vc3QgPSB0QXR0Llk7DQoJCQllbmQNCgkJCQkJCQ0KCQllbmQNCgkNCglsb2NhbCBuQWRqdXN0WCA9IDA7DQoJbG9jYWwgbkFkanVzdFkgPSAwOw0KCQ0KCQlpZiBuWCB+PSBuaWwgdGhlbg0KCQluQWRqdXN0WCA9IChuWCAtIG5MZWZ0TW9zdCk7DQoJCWVuZA0KCQkNCgkJaWYgblkgfj0gbmlsIHRoZW4NCgkJbkFkanVzdFkgPSAoblkgLSBuVG9wTW9zdCk7DQoJCWVuZA0KCQkNCgkJZm9yIHNPYmplY3QsIHRBdHQgaW4gcGFpcnMoX0dST1VQU1tzR3JvdXBOYW1lXSkgZG8NCgkJbG9jYWwgZkFjdGlvbiA9IHRUeXBlc1t0QXR0LlR5cGVdOw0KCQl0QXR0LlggPSB0QXR0LlggKyBuQWRqdXN0WDsNCgkJdEF0dC5ZID0gdEF0dC5ZICsgbkFkanVzdFk7DQoJCWZBY3Rpb24uU2V0UG9zKHNPYmplY3QsdEF0dC5YLHRBdHQuWSk7DQoJCWVuZA0KCQ0KCWVuZA0KCQ0KQXBwbGljYXRpb24uU2V0UmVkcmF3KHRydWUpOw0KcmV0dXJuIDANCmVsc2UNCnJldHVybiAtMg0KZW5kDQplbmQNCg0KDQoNCi0tPT09PT09PT09PT09PT09PT09PT09PT09PSEhIQ0KLS0gR3JvdXAuU2V0U2l6ZQ0KLS09PT09PT09PT09PT09PT09PT09PT09PT09DQpmdW5jdGlvbiBHcm91cC5TZXRTaXplKC4uLikNCklSTFVBX1BMVUdJTl9DaGVja051bUFyZ3MoYXJnLDEpDQpsb2NhbCBzR3JvdXBOYW1lID0gSVJMVUFfUExVR0lOX0NoZWNrVHlwZXMoYXJnLDEseyJzdHJpbmcifSk7DQpsb2NhbCBuSGVpZ2h0ID0gSVJMVUFfUExVR0lOX0NoZWNrVHlwZXMoYXJnLDIseyJudW1iZXIiLCJuaWwifSk7DQpsb2NhbCBuV2lkdGggPSBJUkxVQV9QTFVHSU5fQ2hlY2tUeXBlcyhhcmcsMyx7Im51bWJlciIsIm5pbCJ9KTsNCi0tPDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PA0KaWYgR3JvdXAuRG9lc0V4aXN0KHNHcm91cE5hbWUpIHRoZW4NCkFwcGxpY2F0aW9uLlNldFJlZHJhdyhmYWxzZSk7DQoNCglpZiBuV2lkdGggb3IgbkhlaWdodCB+PSBuaWwgdGhlbg0KDQoJCWlmIG5XaWR0aCA9PSBuaWwgdGhlbg0KCQkJDQoJCQlpZiBuSGVpZ2h0IDwgMCB0aGVuDQoJCQluSGVpZ2h0ID0gMDsNCgkJCWVuZA0KCQkJRGlhbG9nLk1lc3NhZ2UoIiIsIiIpOw0KCQkJZm9yIHNPYmplY3QsIHRBdHQgaW4gcGFpcnMoX0dST1VQU1tzR3JvdXBOYW1lXSkgZG8NCgkJCWxvY2FsIGZBY3Rpb24gPSB0VHlwZXNbdEF0dC5UeXBlXTsNCgkJCXRBdHQuSGVpZ2h0ID0gbkhlaWdodDsNCgkJCWZBY3Rpb24uU2V0U2l6ZShzT2JqZWN0LHRBdHQuV2lkdGgsdEF0dC5IZWlnaHQpDQoJCQllbmQNCgkJDQoJCWVsc2VpZiBuSGVpZ2h0ID09IG5pbCB0aGVuDQoJCQkNCgkJCWlmIG5XaWR0aCA8IDAgdGhlbg0KCQkJbldpZHRoID0gMDsNCgkJCWVuZA0KCQkJCQkJDQoJCQlmb3Igc09iamVjdCwgdEF0dCBpbiBwYWlycyhfR1JPVVBTW3NHcm91cE5hbWVdKSBkbw0KCQkJbG9jYWwgZkFjdGlvbiA9IHRUeXBlc1t0QXR0LlR5cGVdOw0KCQkJdEF0dC5XaWR0aCA9IG5XaWR0aDsNCgkJCWZBY3Rpb24uU2V0U2l6ZShzT2JqZWN0LHRBdHQuV2lkdGgsdEF0dC5IZWlnaHQpDQoJCQllbmQNCgkJDQoJCWVsc2UNCgkJCQ0KCQkJaWYgbldpZHRoIDwgMCB0aGVuDQoJCQluV2lkdGggPSAwOw0KCQkJZW5kDQoJCQkNCgkJCWlmIG5IZWlnaHQgPCAwIHRoZW4NCgkJCW5IZWlnaHQgPSAwOw0KCQkJZW5kDQoJCQkJCQkNCgkJCWZvciBzT2JqZWN0LCB0QXR0IGluIHBhaXJzKF9HUk9VUFNbc0dyb3VwTmFtZV0pIGRvDQoJCQlsb2NhbCBmQWN0aW9uID0gdFR5cGVzW3RBdHQuVHlwZV07DQoJCQl0QXR0LldpZHRoID0gbldpZHRoOw0KCQkJdEF0dC5IZWlnaHQgPSBuSGVpZ2h0Ow0KCQkJZkFjdGlvbi5TZXRTaXplKHNPYmplY3QsdEF0dC5XaWR0aCx0QXR0LkhlaWdodCkNCgkJCWVuZA0KCQkJCQ0KCQllbmQJCQkNCgkNCgllbmQNCgkNCkFwcGxpY2F0aW9uLlNldFJlZHJhdyh0cnVlKTsNCnJldHVybiAwDQplbHNlDQpyZXR1cm4gLTINCmVuZA0KZW5kDQoNCg0KDQotLT09PT09PT09PT09PT09PT09PT09PT09PT0hISENCi0tIEdyb3VwLlNldFZpc2libGUNCi0tPT09PT09PT09PT09PT09PT09PT09PT09PQ0KZnVuY3Rpb24gR3JvdXAuU2V0VmlzaWJsZSguLi4pDQpJUkxVQV9QTFVHSU5fQ2hlY2tOdW1BcmdzKGFyZywyKQ0KbG9jYWwgc0dyb3VwTmFtZSA9IElSTFVBX1BMVUdJTl9DaGVja1R5cGVzKGFyZywxLHsic3RyaW5nIn0pOw0KbG9jYWwgYlZpc2libGUgPSBJUkxVQV9QTFVHSU5fQ2hlY2tUeXBlcyhhcmcsMix7ImJvb2xlYW4ifSk7DQotLTw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDwJDQppZiBHcm91cC5Eb2VzRXhpc3Qoc0dyb3VwTmFtZSkgdGhlbg0KQXBwbGljYXRpb24uU2V0UmVkcmF3KGZhbHNlKTsNCg0KCWZvciBzT2JqZWN0LCB0QXR0IGluIHBhaXJzKF9HUk9VUFNbc0dyb3VwTmFtZV0pIGRvDQoJbG9jYWwgZkFjdGlvbiA9IHRUeXBlc1t0QXR0LlR5cGVdOw0KCXRBdHQuSXNWaXNpYmxlID0gYlZpc2libGU7DQoJZkFjdGlvbi5TZXRWaXNpYmxlKHNPYmplY3QsIGJWaXNpYmxlKTsNCgllbmQNCg0KQXBwbGljYXRpb24uU2V0UmVkcmF3KHRydWUpOw0KcmV0dXJuIDANCmVsc2UNCnJldHVybiAtMg0KZW5kDQplbmQNCg0KDQoNCi0tPT09PT09PT09PT09PT09PT09PT09PT09PSEhIQ0KLS0gR3JvdXAuU3RvcmVTZXR0aW5ncw0KLS09PT09PT09PT09PT09PT09PT09PT09PT09DQpmdW5jdGlvbiBHcm91cC5TdG9yZVNldHRpbmdzKC4uLikNCklSTFVBX1BMVUdJTl9DaGVja051bUFyZ3MoYXJnLDIpDQpsb2NhbCBzR3JvdXBOYW1lID0gSVJMVUFfUExVR0lOX0NoZWNrVHlwZXMoYXJnLDEseyJzdHJpbmcifSk7DQpsb2NhbCBzS2V5ID0gSVJMVUFfUExVR0lOX0NoZWNrVHlwZXMoYXJnLDIseyJzdHJpbmcifSk7DQotLTw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDwNCmlmIEdyb3VwLkRvZXNFeGlzdChzR3JvdXBOYW1lKSB0aGVuDQoJDQoJaWYgU3RyaW5nLlJlcGxhY2Uoc0tleSwgIiAiLCAiIiwgZmFsc2UpIH49ICIiIHRoZW4NCglUcmFuc2ZlclRhYmxlRGF0YShfR1JPVVBTLCBzR3JvdXBOYW1lLCBfR1JPVVBfQkFOSywgc0tleSk7DQoJZWxzZQ0KCVRyYW5zZmVyVGFibGVEYXRhKF9HUk9VUFMsIHNHcm91cE5hbWUsIF9HUk9VUF9CQU5LLCBzR3JvdXBOYW1lKQ0KCWVuZA0KDQpyZXR1cm4gMA0KZWxzZQ0KcmV0dXJuIC0yDQplbmQNCmVuZA0KDQoNCg0KLS09PT09PT09PT09PT09PT09PT09PT09PT09DQotLSBHcm91cC5Ub2dnbGVFbmFibGVkDQotLT09PT09PT09PT09PT09PT09PT09PT09PT0NCmZ1bmN0aW9uIEdyb3VwLlRvZ2dsZUVuYWJsZWQoLi4uKQ0KSVJMVUFfUExVR0lOX0NoZWNrTnVtQXJncyhhcmcsMSkNCmxvY2FsIHNHcm91cE5hbWUgPSBJUkxVQV9QTFVHSU5fQ2hlY2tUeXBlcyhhcmcsMSx7InN0cmluZyJ9KTsNCi0tPDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PA0KaWYgR3JvdXAuRG9lc0V4aXN0KHNHcm91cE5hbWUpIHRoZW4NCgkNCglpZiBUYWJsZS5Db3VudChfR1JPVVBTW3NHcm91cE5hbWVdKSA+IDAgdGhlbg0KCUFwcGxpY2F0aW9uLlNldFJlZHJhdyhmYWxzZSk7DQoJCQ0KCQlmb3Igc09iamVjdCwgdEF0dCBpbiBwYWlycyhfR1JPVVBTW3NHcm91cE5hbWVdKSBkbw0KCQlsb2NhbCBmQWN0aW9uID0gdFR5cGVzW3RBdHQuVHlwZV07DQoJCQ0KCQkJaWYgdEF0dC5Jc0VuYWJsZWQgdGhlbg0KCQkJdEF0dC5Jc0VuYWJsZWQgPSBmYWxzZTsNCgkJCWZBY3Rpb24uU2V0RW5hYmxlZChzT2JqZWN0LCBmYWxzZSk7DQoJCQllbHNlDQoJCQl0QXR0LklzRW5hYmxlZCA9IHRydWU7DQoJCQlmQWN0aW9uLlNldEVuYWJsZWQoc09iamVjdCwgdHJ1ZSk7DQoJCQllbmQNCgkJCQ0KCQllbmQNCgkJDQoJQXBwbGljYXRpb24uU2V0UmVkcmF3KHRydWUpOw0KCWVuZA0KDQpyZXR1cm4gMA0KZWxzZQ0KcmV0dXJuIC0yDQplbmQNCmVuZA0KDQoNCg0KLS09PT09PT09PT09PT09PT09PT09PT09PT09DQotLSBHcm91cC5Ub2dnbGVWaXNpYmxlDQotLT09PT09PT09PT09PT09PT09PT09PT09PT0NCmZ1bmN0aW9uIEdyb3VwLlRvZ2dsZVZpc2libGUoLi4uKQ0KSVJMVUFfUExVR0lOX0NoZWNrTnVtQXJncyhhcmcsMSkNCmxvY2FsIHNHcm91cE5hbWUgPSBJUkxVQV9QTFVHSU5fQ2hlY2tUeXBlcyhhcmcsMSx7InN0cmluZyJ9KTsNCi0tPDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PA0KaWYgR3JvdXAuRG9lc0V4aXN0KHNHcm91cE5hbWUpIHRoZW4NCgkNCglpZiBUYWJsZS5Db3VudChfR1JPVVBTW3NHcm91cE5hbWVdKSA+IDAgdGhlbg0KCUFwcGxpY2F0aW9uLlNldFJlZHJhdyhmYWxzZSk7DQoJCQ0KCQlmb3Igc09iamVjdCwgdEF0dCBpbiBwYWlycyhfR1JPVVBTW3NHcm91cE5hbWVdKSBkbw0KCQlsb2NhbCBmQWN0aW9uID0gdFR5cGVzW3RBdHQuVHlwZV07DQoJCQ0KCQkJaWYgdEF0dC5Jc1Zpc2libGUgdGhlbg0KCQkJdEF0dC5Jc1Zpc2libGUgPSBmYWxzZTsNCgkJCWZBY3Rpb24uU2V0VmlzaWJsZShzT2JqZWN0LCBmYWxzZSk7DQoJCQllbHNlDQoJCQl0QXR0LklzVmlzaWJsZSA9IHRydWU7DQoJCQlmQWN0aW9uLlNldFZpc2libGUoc09iamVjdCwgdHJ1ZSk7DQoJCQllbmQNCgkJCQ0KCQllbmQNCgkJDQoJQXBwbGljYXRpb24uU2V0UmVkcmF3KHRydWUpOw0KCWVuZA0KDQpyZXR1cm4gMA0KZWxzZQ0KcmV0dXJuIC0yDQplbmQNCmVuZA==</Source>
            <FoldLines />
            <BookMarks />
        </Script>
    </Scripts>
    <Modules />
    <Dependencies />
    <Resources />
    <Properties>
        <Property Name="PluginName">Group</Property>
        <Property Name="HelpFileAuthoring">1</Property>
        <Property Name="PluginVersion">1.0.0.0</Property>
        <Property Name="AuthorInfo">Group Plugin For AutoPlay Media Studio</Property>
    </Properties>
    <Intellisense />
</Project>
